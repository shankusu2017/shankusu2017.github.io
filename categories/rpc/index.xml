<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Rpc on 程序员的小天地</title>
    <link>http://shanks.link/categories/rpc/</link>
    <description>Recent content in Rpc on 程序员的小天地</description>
    <generator>Hugo</generator>
    <language>zh-CN</language>
    <lastBuildDate>Fri, 08 Dec 2023 16:20:09 +0800</lastBuildDate>
    <atom:link href="http://shanks.link/categories/rpc/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>thrift 之 go 入门 Getting Started with Thrift Go</title>
      <link>http://shanks.link/blog/2023/12/08/thrift-%E4%B9%8B-go-%E5%85%A5%E9%97%A8-getting-started-with-thrift-go/</link>
      <pubDate>Fri, 08 Dec 2023 16:20:09 +0800</pubDate>
      <guid>http://shanks.link/blog/2023/12/08/thrift-%E4%B9%8B-go-%E5%85%A5%E9%97%A8-getting-started-with-thrift-go/</guid>
      <description>&lt;h3 id=&#34;下载安装-thrift-编译器&#34;&gt;下载、安装 thrift 编译器&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;thrift 编译器的下载连接 &lt;a href=&#34;https://thrift.apache.org/downloa&#34;&gt;https://thrift.apache.org/downloa&lt;/a&gt; 这里注意下版本&lt;/li&gt;&#xA;&lt;li&gt;将下载的编译器放到系统的可执行目录下，并去掉版本信息， eg: thrift-0.19.0.exe 改为 thrift.exe&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;go-安装-thrift-包&#34;&gt;go 安装 thrift 包&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;go get github.com/apache/thrift@0.19.0&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;&lt;span style=&#34;color:#f00;font-style:italic&#34;&gt;#这里的版本要和上面的对应&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;新建-tmp-目录&#34;&gt;新建 tmp 目录&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;新建一个临时目录 tmp&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;在新建的 tmp 目录下新建一个存放 thrift 文件的 thrift 目录&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;将上述 thrift 包的实例文件(tutorial)拷贝到 thrift 目录下&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;我这里的 thrift 安装包的路径是 C:&lt;span style=&#34;color:#009c00&#34;&gt;\U&lt;/span&gt;sers&lt;span style=&#34;color:#009c00&#34;&gt;\s&lt;/span&gt;hanks&lt;span style=&#34;color:#009c00&#34;&gt;\g&lt;/span&gt;o&lt;span style=&#34;color:#009c00&#34;&gt;\p&lt;/span&gt;kg&lt;span style=&#34;color:#009c00&#34;&gt;\m&lt;/span&gt;od&lt;span style=&#34;color:#009c00&#34;&gt;\g&lt;/span&gt;ithub.com&lt;span style=&#34;color:#009c00&#34;&gt;\a&lt;/span&gt;pache&lt;span style=&#34;color:#009c00&#34;&gt;\t&lt;/span&gt;hrift@v0.19.0 &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;将 tutorial 中的 shared.thrift 和 tutorial.thrift 文件 拷贝到 tmp/thrift中&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;生成对应语言的协议文件&#34;&gt;生成对应语言的协议文件&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;在上述新建的 tmp 目录下执行 &#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;thrift -r --gen go thrift/tutorial.thrift&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;生产 go 语言版本的 thrift协议代码&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;拷贝实例代码&#34;&gt;拷贝实例代码&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;将上述安装目录下的 tutorial\go\src 中的代码（包括上层的 server.crt 和 server.key ）拷贝到 tmp 目录下&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;编译-go-代码&#34;&gt;编译 go 代码&lt;/h3&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;go mod init example.com/m 有 go.mod 可不执行&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;go build main.go&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;编译报错处理即可&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
  </channel>
</rss>
