<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
	<meta name="generator" content="Hugo 0.147.3">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>程序员的小天地 - 程序员的小天地</title>
    <meta name="keywords" content="Golang,golang,go,git,Git,Lua,lua">
    
    <meta property="og:title" content="程序员的小天地">
    <meta property="og:site_name" content="程序员的小天地">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="程序员的小天地 - 程序员的小天地" />
    <meta name="description" content="愿星光伴你左右"> 
    <link rel="shortcut icon" href="http://shanks.link/img/favicon.ico" />
    <link rel="apple-touch-icon" href="http://shanks.link/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="http://shanks.link/img/apple-touch-icon.png" />
    <link href="http://shanks.link/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    
    <link href="http://shanks.link/css/main.css" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/css/syntax.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: false, 
    motion: true
  };
</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="http://shanks.link/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">程序员的小天地</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="http://shanks.link/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/todo/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />todo
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/thinking/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />思考
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/life/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />life
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/food/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />food
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/os/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OS
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/lua/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />lua
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/redis/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />redis
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/go/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Golang
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/c/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />C
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/tcpip/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />TCP/IP
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/ebpf/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />ebpf
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/p4/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />p4
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/openvpn/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OpenVPN
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/ipsec/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />IPSec
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/l2tp/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />L2TP
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/dns/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />DNS
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/distributed/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />distributed
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/web/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />web
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/openwrt/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OpenWRT
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/%E8%BF%90%E7%BB%B4/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />运维
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/git/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />Git
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/%E9%B8%9F%E5%93%A5%E7%9A%84%E7%A7%81%E6%88%BF%E8%8F%9C/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />鸟哥的私房菜
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/it/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />IT杂谈
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/finance/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />投资
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />About Me
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/links/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />友情链接
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/ftp/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />FTP
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
    
 <section id="posts" class="posts-expand">

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/10/21/openwrt-luci-uci%E4%B8%89/" itemprop="url">
        Openwrt LuCI UCI（三）
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-10-21">
    2022-10-21
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/openwrt" itemprop="url" rel="index">
        <span itemprop="name">OpenWrt</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">4277 字 ~9分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h3 id="uci简介">UCI简介</h3>
<ul>
<li>UCI是Unified Configuration Interface的缩写，翻译成中文就是统一配置接口，用途就是为OpenWrt提供一个集中控制的接口。</li>
<li>配置接口启动流程：</li>
</ul>
<blockquote>
<ul>
<li>① 启动脚本 /etc/init.d/xxx；</li>
<li>② 启动脚本通过UCI分析库从 /etc/config/xxx 获得启动参数；</li>
<li>③ 启动脚本完成正常启动。</li>
</ul></blockquote>
<p><img src="http://shanks.link/img/openwrt/20200111121815937.png" alt="在这里插入图片描述"></p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://shanks.link/blog/2022/10/21/openwrt-luci-uci%E4%B8%89/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/10/21/openwrt-luci-cbi%E4%BA%8C/" itemprop="url">
        Openwrt LuCI CBI（二）
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-10-21">
    2022-10-21
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/openwrt" itemprop="url" rel="index">
        <span itemprop="name">OpenWrt</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">4392 字 ~9分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h3 id="一cbi控件类型汇总">一、CBI控件类型汇总</h3>
<ul>
<li>CBI模型是描述UCI配置文件结构的Lua文件，并且CBI解析器将lua文件转为HTML呈现给用户 。</li>
<li>所有 CBI 模型文件必须返回类型为 luci.cbi.Map 的对象。</li>
<li>CBI 模型文件的范围由 luci.cbi 模块的内容和 luci.i18n 的转换函数自动扩展。</li>
</ul>
<table>
  <thead>
      <tr>
          <th>名称</th>
          <th>描述</th>
          <th>继承自</th>
          <th>模板</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>NamedSection</td>
          <td>A fixed configuration section defined by its name</td>
          <td>NamedSection = class(AbstractSection)</td>
          <td>cbi/nsection</td>
      </tr>
      <tr>
          <td>TypedSection</td>
          <td>A (set of) configuration section(s) defined by the type</td>
          <td>TypedSection = class(AbstractSection)</td>
          <td>cbi/tsection</td>
      </tr>
      <tr>
          <td>Node</td>
          <td>Node pseudo abstract class</td>
          <td>Node = class()</td>
          <td>cbi/node</td>
      </tr>
      <tr>
          <td>Template</td>
          <td>A simple template element</td>
          <td>Template = class(Node)</td>
          <td></td>
      </tr>
      <tr>
          <td>Map</td>
          <td>A map describing a configuration file</td>
          <td>Map = class(Node)</td>
          <td>cbi/map</td>
      </tr>
      <tr>
          <td>Compound</td>
          <td>Container</td>
          <td>Compound = class(Node)</td>
          <td>cbi/compound</td>
      </tr>
      <tr>
          <td>Delegator</td>
          <td>Node controller</td>
          <td>Delegator = class(Node)</td>
          <td>cbi/delegator</td>
      </tr>
      <tr>
          <td>SimpleForm</td>
          <td>A Simple non-UCI form</td>
          <td>SimpleForm = class(Node)</td>
          <td>cbi/simpleform</td>
      </tr>
      <tr>
          <td>Form</td>
          <td></td>
          <td>Form = class(SimpleForm)</td>
          <td></td>
      </tr>
      <tr>
          <td>AbstractSection</td>
          <td></td>
          <td>AbstractSection = class(Node)</td>
          <td></td>
      </tr>
      <tr>
          <td>SimpleSection</td>
          <td></td>
          <td>SimpleSection = class(AbstractSection)</td>
          <td>cbi/nullsection</td>
      </tr>
      <tr>
          <td>Table</td>
          <td></td>
          <td>Table = class(AbstractSection)</td>
          <td>cbi/tblsection</td>
      </tr>
      <tr>
          <td>AbstractValue</td>
          <td>An abstract Value Type</td>
          <td>AbstractValue = class(Node)</td>
          <td></td>
      </tr>
      <tr>
          <td>Value</td>
          <td>A one-line value</td>
          <td>Value = class(AbstractValue)</td>
          <td>cbi/value</td>
      </tr>
      <tr>
          <td>DummyValue</td>
          <td>This does nothing except being there</td>
          <td>DummyValue = class(AbstractValue)</td>
          <td>cbi/dvalue</td>
      </tr>
      <tr>
          <td>Flag</td>
          <td>A flag being enabled or disabled</td>
          <td>Flag = class(AbstractValue)</td>
          <td>cbi/fvalue</td>
      </tr>
      <tr>
          <td>ListValue</td>
          <td>A one-line value predefined in a list</td>
          <td>ListValue = class(AbstractValue)</td>
          <td>cbi/lvalue</td>
      </tr>
      <tr>
          <td>MultiValue</td>
          <td>Multiple delimited values</td>
          <td>MultiValue = class(AbstractValue)</td>
          <td>cbi/mvalue</td>
      </tr>
      <tr>
          <td>StaticList</td>
          <td></td>
          <td>StaticList = class(MultiValue)</td>
          <td></td>
      </tr>
      <tr>
          <td>DynamicList</td>
          <td></td>
          <td>DynamicList = class(AbstractValue)</td>
          <td>cbi/dynlist</td>
      </tr>
      <tr>
          <td>TextValue</td>
          <td>A multi-line value</td>
          <td>TextValue = class(AbstractValue)</td>
          <td>cbi/tvalue</td>
      </tr>
      <tr>
          <td>Button</td>
          <td></td>
          <td>Button = class(AbstractValue)</td>
          <td>cbi/button</td>
      </tr>
      <tr>
          <td>FileUpload</td>
          <td></td>
          <td>FileUpload = class(AbstractValue)</td>
          <td>cbi/upload</td>
      </tr>
      <tr>
          <td>FileBrowser</td>
          <td></td>
          <td>FileBrowser = class(AbstractValue)</td>
          <td>cbi/browser</td>
      </tr>
      <tr>
          <td>Page</td>
          <td>A simple node</td>
          <td>Page = class(Node)</td>
          <td></td>
      </tr>
  </tbody>
</table>
<h3 id="二cbi常用控件用法详解">二、CBI常用控件用法详解</h3>
<h4 id="21-class-map-config-title-description">2.1 class Map (config, title, description)</h4>
<ul>
<li>This is the root object of the model.。</li>
<li>模型的根对象</li>
</ul>
<blockquote>
<p>参数说明:</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://shanks.link/blog/2022/10/21/openwrt-luci-cbi%E4%BA%8C/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/10/21/pushing-a-branch-to-bitbucket-fails-with-the-error-refspec-matches-more-than-one./" itemprop="url">
        Pushing a branch to Bitbucket fails with the error, &#34;refspec matches more than one&#34;.
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-10-21">
    2022-10-21
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/git" itemprop="url" rel="index">
        <span itemprop="name">git</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">414 字 ~2分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="summary">Summary</h1>
<p>The error &ldquo;refspec matches more than one&rdquo; is shown while pushing a branch to Bitbucket.</p>
<p>This occurs because there is more than one <a href="https://git-scm.com/book/en/v2/Git-Internals-Git-References">Git ref</a> that matches the ref name specified in the push command.</p>
<h2 id="example">Example</h2>
<p>Suppose a repo has a <a href="https://git-scm.com/docs/git-branch">branch</a> and a <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging">tag</a> with the same name, &ldquo;<code>dev</code>&rdquo;.</p>
<p>When an attempt is made to push the &ldquo;dev&rdquo; branch to the remote, the error &ldquo;<code>refspec matches more than one</code>&rdquo; will be shown and the push fails.</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://shanks.link/blog/2022/10/21/pushing-a-branch-to-bitbucket-fails-with-the-error-refspec-matches-more-than-one./" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/10/20/openwrt-luci-%E5%85%A5%E9%97%A8%E4%B8%80/" itemprop="url">
        Openwrt LuCI 入门（一）
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-10-20">
    2022-10-20
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/openwrt" itemprop="url" rel="index">
        <span itemprop="name">OpenWrt</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">3872 字 ~8分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h3 id="luci基本概念">LuCI基本概念</h3>
<ul>
<li>
<p>UCI 是 <a href="https://so.csdn.net/so/search?q=Openwrt&amp;spm=1001.2101.3001.7020">Openwrt</a> 中为实现所有系统配置的一个统一接口，英文名 <code>Unified Configuration Interface</code>，即统一配置接口。轻量级 LUA 语言的官方版本只包括一个精简的核心和最基本的库。这使得 LUA 体积小、启动速度快，从而适合嵌入在别的程序里。 LuCI 即是这两个项目的合体，可以实现路由的网页配置界面。</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://shanks.link/blog/2022/10/20/openwrt-luci-%E5%85%A5%E9%97%A8%E4%B8%80/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/10/20/openwrt-netifd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url">
        OpenWrt netifd学习笔记
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-10-20">
    2022-10-20
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/openwrt" itemprop="url" rel="index">
        <span itemprop="name">OpenWrt</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">4737 字 ~10分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="netifd简介">Netifd简介</h1>
<p>Netifd是<a href="https://so.csdn.net/so/search?q=OpenWrt&amp;spm=1001.2101.3001.7020">OpenWrt</a>中用于进行网络配置的守护进程，基本上所有网络接口设置以及内核的netlink事件都可以由netifd来处理完成。
在启动netifd之前用户需要将所需的配置写入uci配置文件/etc/config/network中，以告知netifd如何设置这些网络接口，如IP地址、上网类型等。如果在netifd运行过程中需要修改配置，则只需更新并保存/etc/config/network，执行/etc/init.d/network reload，netifd便可根据配置文件差异快速地完成网络接口的更新。</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://shanks.link/blog/2022/10/20/openwrt-netifd%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/10/20/openwrt-ubus%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E4%B8%BE%E4%BE%8B/" itemprop="url">
        Openwrt ubus实现进程间通信举例
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-10-20">
    2022-10-20
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/openwrt" itemprop="url" rel="index">
        <span itemprop="name">OpenWrt</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">3994 字 ~8分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <p><a href="http://shanks.link/blog/2022/10/20/openwrt-%E4%BD%BF%E7%94%A8-ubus%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/">上一篇文章</a>介绍了ubus的组件和实现原理，本文通过代码实例介绍使用ubus进行进程间通信的三种方式。</p>
<ol>
<li>invoke的方式实现端对端通信
最简单的情景就是一个提供服务的server端，一个请求服务的client端，client请求server的服务。
下面的例子中，server注册了一个名为“scan_prog”的对象，该对象中提供一个“scan”方法：
ubus_invoke.h：</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#f00;font-style:italic">#ifndef __UBUS_INVOKE_H__
</span></span></span><span style="display:flex;"><span><span style="color:#f00;font-style:italic">#define __UBUS_INVOKE_H__
</span></span></span><span style="display:flex;"><span><span style="color:#f00;font-style:italic">#include</span> <span style="color:#f00;font-style:italic">&lt;json/json.h&gt;</span><span style="color:#f00;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#f00;font-style:italic">#include</span> <span style="color:#f00;font-style:italic">&lt;libubox/blobmsg_json.h&gt;</span><span style="color:#f00;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#f00;font-style:italic"></span> 
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#00f">struct</span> prog_attr {
</span></span><span style="display:flex;"><span>	<span style="color:#00f">char</span> name[64];
</span></span><span style="display:flex;"><span>	<span style="color:#00f">int</span> chn_id;
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#f00;font-style:italic">#define PROG_MAX	8
</span></span></span><span style="display:flex;"><span><span style="color:#f00;font-style:italic"></span> 
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#f00;font-style:italic">#endif  </span><span style="color:#f00;font-style:italic">/* __UBUS_INVOKE_H__ */</span><span style="color:#f00;font-style:italic">
</span></span></span></code></pre></div><p>invoke_server.c：</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://shanks.link/blog/2022/10/20/openwrt-ubus%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E4%B8%BE%E4%BE%8B/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/10/20/openwrt-%E4%BD%BF%E7%94%A8-ubus%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/" itemprop="url">
        OpenWrt 使用 ubus实现进程通信
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-10-20">
    2022-10-20
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/openwrt" itemprop="url" rel="index">
        <span itemprop="name">OpenWrt</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">3627 字 ~8分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <p>ubus为openwrt平台开发中的进程间通信提供了一个通用的框架。它让进程间通信的实现变得非常简单，并且ubus具有很强的可移植性，可以很方便的移植到其他linux平台上使用。本文描述了ubus的实现原理和整体框架。</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://shanks.link/blog/2022/10/20/openwrt-%E4%BD%BF%E7%94%A8-ubus%E5%AE%9E%E7%8E%B0%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/10/20/json-rpc/" itemprop="url">
        JSON-RPC
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-10-20">
    2022-10-20
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/web" itemprop="url" rel="index">
        <span itemprop="name">web</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">1047 字 ~3分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="json-rpc">JSON-RPC</h1>
<p>From Wikipedia, the free encyclopedia</p>
<p><a href="https://en.wikipedia.org/wiki/JSON-RPC#mw-head">Jump to navigation</a><a href="https://en.wikipedia.org/wiki/JSON-RPC#searchInput">Jump to search</a></p>
<p><strong>JSON-RPC</strong> is a <a href="https://en.wikipedia.org/wiki/Remote_procedure_call">remote procedure call</a> <a href="https://en.wikipedia.org/wiki/Protocol_(computing)">protocol</a> encoded in <a href="https://en.wikipedia.org/wiki/JSON">JSON</a>. It is similar to the <a href="https://en.wikipedia.org/wiki/XML-RPC">XML-RPC</a> protocol, defining only a few data types and commands. JSON-RPC allows for notifications (data sent to the server that does not require a response) and for multiple calls to be sent to the server which may be answered asynchronously.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">Version</th>
          <th style="text-align: center">Description</th>
          <th style="text-align: center">Dated</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center">1.0</td>
          <td style="text-align: center"><a href="https://www.jsonrpc.org/specification_v1">Original version</a></td>
          <td style="text-align: center">2005</td>
      </tr>
      <tr>
          <td style="text-align: center">1.1 WD</td>
          <td style="text-align: center"><a href="https://jsonrpc.org/historical/json-rpc-1-1-wd.html">Working draft</a>. Adds named parameters, adds specific error codes, and adds introspection functions.</td>
          <td style="text-align: center">2006-08-07</td>
      </tr>
      <tr>
          <td style="text-align: center">1.1 Alt</td>
          <td style="text-align: center"><a href="http://jsonrpc.org/historical/json-rpc-1-1-alt.txt">Suggestion for a simple JSON-RPC 1.1</a>. Alternative proposal to 1.1 WD.</td>
          <td style="text-align: center">2007-05-06</td>
      </tr>
      <tr>
          <td style="text-align: center">1.1 Object Specification</td>
          <td style="text-align: center"><a href="http://jsonrpc.org/historical/json-rpc-object-specification.html">Object Specification</a>. Alternative proposal to 1.1 WD/1.1ALT.</td>
          <td style="text-align: center">2007-07-30</td>
      </tr>
      <tr>
          <td style="text-align: center">1.2</td>
          <td style="text-align: center"><a href="http://jsonrpc.org/historical/jsonrpc12_proposal.html">Proposal</a>. A later revision of this document was renamed to 2.0.</td>
          <td style="text-align: center">2007-12-27</td>
      </tr>
      <tr>
          <td style="text-align: center">2.0</td>
          <td style="text-align: center"><a href="http://jsonrpc.org/historical/json-rpc-1-2-proposal.txt">Specification proposal</a></td>
          <td style="text-align: center">2009-05-24</td>
      </tr>
      <tr>
          <td style="text-align: center">2.0 (Revised-)</td>
          <td style="text-align: center"><a href="http://jsonrpc.org/spec">Specification</a></td>
          <td style="text-align: center">2010-03-26</td>
      </tr>
  </tbody>
</table>
<h2 id="usage">Usage</h2>
<p>JSON-RPC works by sending a request to a server implementing this protocol. The client in that case is typically software intending to call a single method of a remote system. Multiple input parameters can be passed to the remote method as an array or object, whereas the method itself can return multiple output data as well. (This depends on the implemented version.)</p>
    </div>
    
    <div class="post-more-link text-center">
    <a class="btn" href="http://shanks.link/blog/2022/10/20/json-rpc/" rel="contents">
      阅读全文 &raquo;
    </a>
    </div>
    
    <footer class="post-footer"><div class="post-eof"></div></footer>
  </article>

</section>
















<nav class="pagination">
    <a class="extend prev" rel="prev" href="http://shanks.link/p/28/"><i class="fa fa-angle-left"></i></a>
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
        
          <a class="page-number" href="http://shanks.link/p/25/">25</a>
        
        
    
        
        
          <a class="page-number" href="http://shanks.link/p/26/">26</a>
        
        
    
        
        
          <a class="page-number" href="http://shanks.link/p/27/">27</a>
        
        
    
        
        
          <a class="page-number" href="http://shanks.link/p/28/">28</a>
        
        
    
        
        
          <span class="page-number current">29</span>
        
        
    
        
        
          <a class="page-number" href="http://shanks.link/p/30/">30</a>
        
        
    
        
        
          <a class="page-number" href="http://shanks.link/p/31/">31</a>
        
        
    
        
        
          <a class="page-number" href="http://shanks.link/p/32/">32</a>
        
        
    
        
        
          <a class="page-number" href="http://shanks.link/p/33/">33</a>
        
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
    <a class="extend next" rel="next" href="http://shanks.link/p/30/"><i class="fa fa-angle-right"></i></a>
</nav>




          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    <section class="site-overview sidebar-panel  sidebar-panel-active ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="http://shanks.link/img/logo.jpg"
        alt="" />
    <p class="site-author-name" itemprop="name"></p>
    <p class="site-description motion-element" itemprop="description"> </p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
        <a href="http://shanks.link/post/">
            <span class="site-state-item-name">日志</span>
        </a>
    </div>
    <div class="site-state-item site-state-categories">
        <a href="http://shanks.link/categories/">
            <span class="site-state-item-name">分类</span>
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="http://shanks.link/tags/">
            <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>

      
<div class="feed-link motion-element">
<a href="http://shanks.link/index.xml" rel="alternate" type="application/rss+xml" target="_blank">
    <i class="fa fa-rss"></i>
    RSS 订阅
</a>
</div>

      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/shankusu2017" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
</div>


      

      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5b4f2ucxar6&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2025</span>
</div>
<div>
  <a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备2021068940号-1</a>
  <a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302003059" rel="noopener" target="_blank">粤公网安备44011302003059</a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="http://shanks.link/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="http://shanks.link/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="http://shanks.link/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script type="text/javascript" src="http://shanks.link/js/utils.js"></script>
<script type="text/javascript" src="http://shanks.link/js/motion.js"></script>
<script type="text/javascript" src="http://shanks.link/js/affix.js"></script>
<script type="text/javascript" src="http://shanks.link/js/schemes/pisces.js"></script>

<script type="text/javascript" src="http://shanks.link/js/bootstrap.js"></script>

<script type="text/javascript" id="motion.page.archive">
  $('.archive-year').velocity('transition.slideLeftIn');
</script>

<script type="text/javascript" src="http://shanks.link/js/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
</body>
</html>