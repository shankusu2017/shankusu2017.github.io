<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>计算机网络面试知识点 - 愿星光伴你左右</title>
    <meta name="keywords" content="Lua,lua,Golang,go">
    
    <meta property="og:title" content="计算机网络面试知识点">
    <meta property="og:site_name" content="愿星光伴你左右">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="计算机网络面试知识点 - 愿星光伴你左右" />
    <meta name="description" content="愿星光伴你左右"> 
    <link rel="shortcut icon" href="http://shanks.link/img/favicon.ico" />
    <link rel="apple-touch-icon" href="http://shanks.link/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="http://shanks.link/img/apple-touch-icon.png" />
    <link href="http://shanks.link/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/css/main.css" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/css/syntax.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="http://shanks.link/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">愿星光伴你左右</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="http://shanks.link/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/lua/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />lua
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/go/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Golang
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/thinking/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />随想录
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/prose/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />散文
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/%E7%94%9F%E6%B4%BB/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />生活
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/os/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OS
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/redis/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />redis
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/%E8%BF%90%E7%BB%B4/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />运维
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />About Me
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/links/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />友情链接
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/04/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%9D%A2%E8%AF%95%E7%9F%A5%E8%AF%86%E7%82%B9/" itemprop="url">
        计算机网络面试知识点
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-04-24">
    2022-04-24
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/cs" itemprop="url" rel="index">
        <span itemprop="name">cs</span>
      </a>
      &nbsp; 
    </span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/tcpip" itemprop="url" rel="index">
        <span itemprop="name">tcpip</span>
      </a>
      &nbsp; 
    </span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/%E9%9D%A2%E8%AF%95" itemprop="url" rel="index">
        <span itemprop="name">面试</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">5434 字 ~11分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h1 id="计算机网络面试知识点">计算机网络面试知识点</h1>
<p><a href="https://www.modb.pro/db/332622">原文链接</a></p>
<h1 id="计算机网络体系模型">计算机网络体系模型</h1>
<ul>
<li>物理层：建立、维护、断开物理连接。</li>
<li>数据链路层：建立逻辑连接、进行硬件地址寻址、差错校验等功能。</li>
<li>网络层：进行逻辑地址寻址，实现不同网络之间的路径选择。</li>
<li>传输层：定义传输数据的协议端口号，以及流控和差错校验。</li>
<li>会话层：建立、管理、终止会话，（在五层模型里面已经合并到了应用层） 会话的一端是本地主机，另一端是远程主机。</li>
<li>表示层：数据的表示、安全、压缩。（在五层模型里面已经合并到了应用层） 格式有，JPEG、ASCll、EBCDIC、加密格式等。</li>
<li>应用层：网络服务与最终用户的一个接口。</li>
</ul>
<p><img src="http://shanks.link/img/tcpip/modb_20220222_6694eb70-9395-11ec-90a4-fa163eb4f6be.png" alt="">计算机网络模型</p>
<p><img src="http://shanks.link/img/tcpip/modb_20220222_66ca5bc0-9395-11ec-90a4-fa163eb4f6be.png" alt="img">模型对比</p>
<p>网络协议其实就是端到端的一个<strong>通信规则</strong>，有了这些规则，双方的沟通才有意义。</p>
<h1 id="tcpip-的头部格式">TCP/IP 的头部格式</h1>
<p><img src="http://shanks.link/img/tcpip/modb_20220222_67335be8-9395-11ec-90a4-fa163eb4f6be.png" alt="img">TCP 头部</p>
<p>其中，有几点比较重要：</p>
<ul>
<li><code>序列号(seq)</code>
：数据包的序号，通过序号来确认包的连续性，解决包的乱序问题。</li>
<li><code>响应号(ack)</code>
：针对上面字段的确认序号，比如服务器接收到客户端的请求，里面包含了 seq 序号，此时服务器响应回去时，会进行 ack = seq + 1 的字段设置，表示已接收到的累积数据。</li>
<li><code>Window</code>
：滑动窗口使用，用来反馈接收方接下来能处理的包大小，防止双方对数据包的处理能力不对等，主要解决了流控问题。</li>
<li><code>TCP Flag</code>
：TCP 包的类型，用来辅助 TCP 的阶段处理，比如 SYN 表示建立连接，FIN 表示关闭连接。</li>
</ul>
<h1 id="tcp-的状态流转">TCP 的状态流转</h1>
<p><img src="http://shanks.link/img/tcpip/modb_20220222_67577fc8-9395-11ec-90a4-fa163eb4f6be.png" alt="img">状态机</p>
<h1 id="tcp-的三次握手四次挥手是怎么样的为什么这么设计">TCP 的三次握手、四次挥手是怎么样的？为什么这么设计？</h1>
<p><img src="http://shanks.link/img/tcpip/modb_20220222_67b137fc-9395-11ec-90a4-fa163eb4f6be.png" alt="img">三次握手、四次挥手</p>
<p>如果我们只进行 2 次握手就建立连接，那么对于 Server 端来讲太容易建立起连接了，基本是有客户端过来，那么 Server 就要建立起连接了。这种情况就会导致连接成本太低，Server 端很容超负载。</p>
<p>四次挥手是因为 TCP 是<code>全双工</code>
的，存在了数据发送与接收两个行为，在这两个方向的数据流入流出都需要进行关闭。</p>
<h1 id="什么是半连接跟它相关的-syn-攻击是怎么样的">什么是半连接？跟它相关的 SYN 攻击是怎么样的？</h1>
<p>当服务接收到客户端请求连接 SYN，然后向客户端响应 ACK 和 SYN 后， 就会将连接维护到半连接队列。当客户端再次回复 ACk 后，当前的连接就会被维护到全连接队列里。</p>
<p>SYN 攻击是 DOS 攻击的一种，通过伪造大量的请求建立连接，使得半连接队列超出最大容量，其他正常的请求无法处理。</p>
<h1 id="四次挥手里的发起方为什么需要等到-time_wait-时间才关闭连接">四次挥手里的发起方为什么需要等到 TIME_WAIT 时间才关闭连接？</h1>
<p><code>TIME_WAIT</code>
是一个定时设置，在 2*MSL（MSL 表示一个包在网络环境中的生存时间，一般为 2 分钟， Linux 里为 30s）时间过后就会真正的 CLOSED。</p>
<p>之所以不立即关闭，主要为了让被动关闭方能有足够的时间接收到最后的 Ack 包，如果没有接收到，被动方就会重新发送 Fin 包，重新触发主动方发送最后的 Ack 包。这样的话，就能尽量保证被动关闭方尽快关闭连接了，毕竟主动关闭方需要承担起主要责任，所以会有 TIME_WAIT 的等待了。</p>
<p>另外一个原因也是怕当前连接立马释放，有一定概率会重用到当前连接标识(五元组)，而旧的网络包由于延迟此时才接收到，就有可能产生包的混乱问题了。</p>
<h1 id="tcp-的重传机制是怎么样的">TCP 的重传机制是怎么样的？</h1>
<p>TCP 发送的包都需要接收方进行一个 <code>Ack</code>
包的响应，如果在一定时间内没有响应的话，那么发送方就会认为包未能正确到达，需要进行重传动作。这就是 TCP 的重传机制。</p>
<p>TCP 里的重传机制会有一个超时的判断，这个超时时间并不是很准确，或者说并不是很标准，毕竟不同的网络环境，包的到达情况都会是不一样的。</p>
<p>所以 TCP 会使用一个采样时间，先记录了正常情况下一个数据包从发送到响应确认这么一来一回的时间，即所谓的 <code>RTT</code>
（Round Trip Time） 时间，根据这个时间进行一些公式计算，得到了超时时间的值：<code>RTO</code>
（Retransmission TimeOut）</p>
<p>对于重传机制，还有另外一种触发机制。上面的情况属于发送方去探知发送情况，有另一种情况是接收方能探知的。比如发送方发送了 1, 2, 3 的包，但实际上接收方只接收到 1 和 3，一直没能收到 2 这个包，那此时接收方就会连续响应三个 关于 2 的 ack 包。</p>
<p>当发送方收到这么一个连续的 3 个 ack 包后，就知道需要重传 2 了，此时就不需要等到 2 的超时未确认触发，可以提前的重传 2 这个包了。</p>
<h1 id="介绍下-tcp-的流量控制滑动窗口是怎么样的">介绍下 TCP 的流量控制，滑动窗口是怎么样的？</h1>
<p>TCP 采用<code>滑动窗口</code>
进行了流量的控制，所谓的滑动窗口即在发送方和接收方各自维护了一个窗口，在这个窗口里将会维护对应的数据包，以感知当前的数据处理情况。</p>
<p>在接收方这边的窗口称之为<code>接收窗口</code>
，它具体表示当前所能接收的数据包大小，计算公式为：当前最大可接收缓冲区大小 - 当前已接收的大小，在连接建好的开始一般为 65535 字节。</p>
<p>在计算出可接收大小后，接收方就会将此值设置在 TCP 头部里的 Window 字段，然后响应回发送方，发送方也就知道了当前所能允许发送的数据包大小了。</p>
<p>在发送方这边的窗口称之为<code>发送窗口</code>
，按正常逻辑来讲，发送窗口维护的是即将要发送的数据，即根据刚刚反馈回来的接收窗口大小计算出的发送数据。</p>
<p>但由于一个数据包的发送需要有一个 ACK 响应才算完整流程，所以对于这些“已发送未响应”的数据也应该纳入到发送窗口的管理，并且只有真的 ACK 响应回来，才能继续下个数据包的准备发送。</p>
<p><img src="http://shanks.link/img/tcpip/modb_20220222_67ebea5a-9395-11ec-90a4-fa163eb4f6be.png" alt="img">滑动窗口</p>
<p>需要注意的是，如果发送方接收到的 Window 大小为 0，则表示当前的接收方已经无能力处理新的包了，此时发送方就不会再下发数据了，直到接收方发送一个<code>窗口通告</code>
，才继续数据的发送。</p>
<p>但此时需要考虑一种情况，就是接收方由于网络问题没能将窗口通告送达发送方，那此时发送方就会一直干等着了.所以对于发送方来讲，会启动<strong>窗口探知</strong>动作，要求接收方 ACK 它当前的接收窗口大小，如果超过 3 次的探知动作，则直接断开连接了。</p>
<h1 id="tcp-对于网络环境的拥塞是怎么感知控制">TCP 对于网络环境的拥塞是怎么感知控制？</h1>
<p>TCP 协议抽象出了<code>拥塞窗口</code>
（cwnd）的概念，它会根据当前的网络拥塞程度进行动态的调整。由于加入了拥塞情况的考虑，上面我们提到过的发送窗口则不能仅仅只考虑接收窗口这个因素了，需要进行 <code>min(拥塞窗口，接收窗口)</code>
的选择发送了。</p>
<h1 id="mtu-和-mss-是指什么">MTU 和 MSS 是指什么？</h1>
<p>MSS 表示 网络传输<strong>数据</strong>的最大值，如果 MSS 加上包头大小，则表示网络传输最大<strong>报文</strong>：MTU 。</p>
<p>在 Internet 这种互联网中，一般 MTU 定义为 576 字节，减去 TCP、IP 的包头 40 字节，则可以得到 MSS = 536 字节的值；而在以太网这种局域网里，一般 MTU 会大点：1500 字节，MSS 为 1460 字节。</p>
<h1 id="tcp-的慢启动是怎么样的有哪些环节">TCP 的慢启动是怎么样的？有哪些环节？</h1>
<p>当连接建立完毕，开始传输数据时，TCP 协议规定不能一开始就发送大尺寸的数据包，这样避免了网络环境有问题时，新加入的连接加剧了拥塞状况。所以，对于新加入的连接而言，需要一点一点的增大数据量，这就是所谓的<code>慢启动</code>
。</p>
<p>其中，慢启动涉及的拥塞窗口计算过程如下：</p>
<ul>
<li>刚开始建立好连接时，拥塞窗口 = 1</li>
<li>每当接收到一个 ACK 包时，拥塞窗口 = 拥塞窗口 + 1，此时呈线性增加。</li>
<li>每当经过一个 RTT，拥塞窗口 = 拥塞窗口 * 2，此时呈指数上升趋势。</li>
</ul>
<h1 id="什么是拥塞避免">什么是拥塞避免？</h1>
<p>从慢启动的算法来看，每经过一个 RTT 后，拥塞窗口的增长速度将会变得很厉害，如果没有进行限制的话，那么很快就会占满带宽了。因此， TCP 协议使用了一个叫慢启动门限(ssthresh)的变量（一般取 65535 字节）。当 cwnd(拥塞窗口) 超过该限制后，就会进入所谓的<code>拥塞避免</code>
阶段了。</p>
<p>在拥塞避免阶段，拥塞窗口的计算过程如下：</p>
<ul>
<li>每接收到一个 ACK 包时，拥塞窗口 = 拥塞窗口 + 1/拥塞窗口</li>
<li>每当经过一个 RTT，拥塞窗口 = 拥塞窗口 + 1</li>
</ul>
<p>从上面的算法可以看出，进入拥塞避免阶段后，数据包的发送大小将呈线性增加了。通过这样的方式，使得 TCP 的传输在前期很快，然后再慢慢降下来，达到网络最佳值。</p>
<h1 id="当拥塞发生时tcp-会怎么处理">当拥塞发生时，TCP 会怎么处理？</h1>
<p>在拥塞发生时，关于拥塞窗口的计算在不同的 TCP 版本里将会不一样，主要有以下 3种版本：</p>
<h2 id="tahoe-版本">Tahoe 版本</h2>
<p>Tahoe 版本是 TCP 的最早版本，当它发现需要进行重传动作，即触发了 RTO 超时或发送方收到三个重复 ACK 包时，此时会进行的动作为：</p>
<ul>
<li>sshthresh(慢启动门限) = cwnd(拥塞窗口) / 2</li>
<li>cwnd 重置为 1</li>
<li>重回慢启动阶段</li>
</ul>
<h2 id="reno-版本">Reno 版本</h2>
<p>Reno 版本进行的动作为：</p>
<ul>
<li>sshthresh(慢启动门限) = cwnd(拥塞窗口) / 2</li>
<li>cwnd(拥塞窗口) = sshthresh(慢启动门限) + 3 * MSS （将 3 个重复 ACK 考虑进去）</li>
<li>进入快速恢复阶段</li>
</ul>
<p>其中，快速恢复阶段的计算又如下：</p>
<ul>
<li>当重传的包发出去后，收到了重传包的 ACK 后，cwnd(拥塞窗口) = cwnd(拥塞窗口) + 1</li>
<li>当收到新的数据包的 ACK 后，此时快速恢复过程已结束，则 cwnd = sshthresh，然后重回拥塞避免阶段</li>
</ul>
<h2 id="newreno-版本">NewReno 版本</h2>
<p>NewReno 是对 Reno 的改进，主要是优化了快速恢复阶段，在 Reno 版本中，所考虑的都是一个包的丢失情况。然而，在实际情况中，一次数据窗口的发送，是有可能出现很多数据包丢失情况的。</p>
<p>这样的话，就会触发多次的 cwnd 和 ssthresh 减半动作，一旦 cwnd 降到小于 3 时，即发送窗口会出现小于 3 的情形，此时将再也触发不了 3 次快速重传动作了，只能依赖 RTO 超时，而一般 RTO 的值是比较大（太小会经常触发重传）的，此时整个传输速度将会大大降低。</p>
<p>所以 NewReno 会在收到所有数据包的确认后才结束快速恢复阶段，这样 cwnd 和 sshthresh 就不会轻易被降低了。</p>
<p>NewReno 主要是使用了一个 recover 变量，作为当前数据窗口中，可能丢包的最大序号。即如果有丢包情况产生，并且大于当前的 recover 值，则会更新该值。</p>
<p>当收到接收方的 ack 后，会进行 ack_seq 的判断，如果 ack_seq &gt; recover，此时就可以结束快速恢复阶段了；如果 ack_seq &lt; recover，则意味着多包丢失，还不能结束快速恢复阶段。通过这样的控制，来提高了整个的吞吐量。</p>
<h1 id="tcp-里有哪些提高效率的算法或机制">TCP 里有哪些提高效率的算法或机制？</h1>
<h2 id="nagle-算法">Nagle 算法</h2>
<p>Nagle 算法把多个小数据包合并到一个片段，并且等待满足一定条件后，再一起发送过去。具体的触发条件如下：</p>
<ul>
<li>如果包长度达到 MSS，则允许发送</li>
<li>如果包含 FIN，则允许发送</li>
<li>如果设置了 TCP_NODELAY，则允许发送</li>
<li>未设置 TCP_CORK 选项时，若所有发出去的小数据包（包长度小于 MSS）均被确认，则允许发送</li>
</ul>
<p>当上述条件都未满足，但发生了超时（一般为 200ms），则立即发送。</p>
<p>对于 TCP 协议来讲，默认会启用 Nagle 算法，降低网络负载，减少网络拥塞，提高网络吞吐。</p>
<h2 id="delay-ack延迟确认">Delay Ack(延迟确认)</h2>
<p>在 TCP 的确认机制里，可以在通信过程中不对每一个 TCP 数据包进行单独的 ACK 包响应，而是在传输数据时，顺便把 ACK 信息随数据包一起发送，这样可以提高网络流量利用率。</p>
<p>如果在一定时间内（一般 40 ms）没有数据包要发送，此时就会单独的进行 ACK 包响应。这个过程也被称为 Delay Ack。</p>
<h1 id="tcp-里的粘包与拆包是怎么样的">TCP 里的粘包与拆包是怎么样的？</h1>
<p>TCP 是面向字节流的传输，它会根据接收方的包处理能力以及当前网络的拥塞情况来一部分一部分的加载数据发送，再加上有 Nagle 这种整合小数据包的算法存在。所以对于接收方来讲，接收到的数据有可能是粘合在一起的，也有可能是被拆分开的，即所谓的粘包和拆包。</p>
<p>对于粘包和拆包现象，常用的解决方案有：</p>
<ul>
<li>在包的首部添加当前要传输的数据包的长度，让接收方根据长度去切割。</li>
<li>将数据包封装为固定长度，不够的补 0，让接收方按固定长度解析。</li>
<li>人为的给数据包添加边界，比如在数据包结尾添加特殊字符，当解析到特殊字符时，接收方就认为读取到了一个完整有意义的数据段了。</li>
</ul>
<h1 id="tcp-为什么是可靠的">TCP 为什么是可靠的？</h1>
<p>TCP 的连接和断开都是双方互相沟通进行的（三次握手、四次挥手）。在数据的传输过程中会进行应答确认、超时重传、流量控制、拥塞控制、拥塞避免等手段去保证传输的准确性。</p>
<h1 id="tcp-和-udp-的区别">TCP 和 UDP 的区别</h1>
<p>TCP 是面向字节流的可靠连接，而 UDP 是面向数据报文的连接，不保证可靠连接，但传输比较快。TCP 常用于邮件、文件传输这种要求准确性高的场景，而 UDP 常用于视频直播这种实时传输的场景。</p>
<h1 id="tcp-和-udp-常见的应用层协议">TCP 和 UDP 常见的应用层协议</h1>
<ul>
<li>TCP 应用层：HTTP(超文本传输协议)、FTP(文件传输协议)、SMTP(邮件传输)</li>
<li>UDP 应用层：DNS、TFTP（简单文件传输协议）、NTP（网络时间协议）</li>
</ul>
<h1 id="http-为何是无状态的">HTTP 为何是无状态的？</h1>
<p>HTTP 是基于 TCP 协议的短连接，按请求-响应来通信。每一次的请求都是独立的，和上次的没有关联。尽管 TCP 是有状态的，但它的状态是为了传输使用，比如报文序号、发送窗口大小等辅助信息，这些和 HTTP 的请求没有关系。</p>
<p>Http 虽然有 keep-alive 字段控制，但那是为了提高传输效率，让此次的请求连接尽量生命周期长些，不至于频繁的建立连接-销毁连接。另外，cookie 会话只是 HTTP 的补充，它是允许关闭或伪造的，并不是协议的通信依赖。</p>
<h1 id="从浏览器输入-url-到显示网页的整个过程">从浏览器输入 url 到显示网页的整个过程</h1>
<p>首先，会根据域名进行 DNS 的解析，以获取到服务器的 IP 地址。拿到 IP 地址后将会和服务端进行三次握手，建立 TCP 连接。接着将会按照 HTTP 协议的请求-响应来传输网页内容。最后，TCP 通过四次挥手结束连接。</p>
<h1 id="http-101120-以及-https-的区别">HTTP 1.0/1.1/2.0 以及 https 的区别</h1>
<h2 id="http-10">HTTP 1.0</h2>
<p>每次请求-响应都会建立一次 TCP 连接，服务器处理完后就会断开 TCP 连接。后面加了 Connection: keep-alive 来延迟 TCP 连接时长，尽量让请求-响应使用同一个连接</p>
<h2 id="http-11">HTTP 1.1</h2>
<ul>
<li>默认 TCP 持久连接，不需要声明 Connection 字段，但同一个域名维持的 TCP 持久连接不会太多，一般 6 个；</li>
<li>引入管道机制，客户端可通过同一个 TCP 连接同时发送多个请求，服务器再按接收到的请求顺序响应；不过这是伪管道模式，因为在同时发送多个后，客户端还是需要阻塞等待服务器的所有响应才能继续后续请求。</li>
<li>新增了 PUT、DELETE、OPTIONS 等请求方式</li>
</ul>
<h2 id="http-20">HTTP 2.0</h2>
<ul>
<li>采用二进制格式而非文本格式</li>
<li>真正的管道模式，非阻塞等待所有响应，相当于全双工的</li>
<li>报文头会压缩后再发送</li>
</ul>
<h2 id="https">HTTPS</h2>
<p>HTTPS 解决了 HTTP 的安全传输问题，在 HTTP 这一层协议下加入了 SSL 层。即进行了端到端的加密/身份验证，以保证数据的不被窃取篡改。</p>
<p>HTTPS 的流程如下：<img src="http://shanks.link/img/tcpip/modb_20220222_6811245a-9395-11ec-90a4-fa163eb4f6be.png" alt="img"></p>
<h1 id="ping-的原理">ping 的原理？</h1>
<p>ping 采用了 ICMP 协议，ICMP 协议用于在 IP 主机、路由器之间传递控制消息。控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。这些控制消息虽然并不传输用户数据，但是对于用户数据的传递起着重要的作用。</p>
<h1 id="什么是-dos-攻击">什么是 DOS 攻击？</h1>
<p>DOS：即拒绝服务，其目的是使计算机或网络无法提供正常的服务。最常见的 DoS 攻击有计算机网络带宽攻击和连通性攻击，像 SYN 洪水攻击也是一种，它利用 TCP 协议发送大量的半连接请求，耗费服务器的 CPU 和内存资源。</p>

    </div>
    <footer class="post-footer">
     
 
<div class="post-tags">     
     
    <a href="http://shanks.link/tags/cs" rel="tag" title="cs">#cs#</a>
    
    <a href="http://shanks.link/tags/tcpip" rel="tag" title="tcpip">#tcpip#</a>
    
    <a href="http://shanks.link/tags/%e9%9d%a2%e8%af%95" rel="tag" title="面试">#面试#</a>
    
</div>



     <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="http://shanks.link/blog/2022/04/24/goroutinue%E7%90%86%E8%A7%A3/" rel="next" title="Goroutinue理解">
        <i class="fa fa-chevron-left"></i> Goroutinue理解
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="http://shanks.link/blog/2022/04/24/go%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/" rel="prev" title="Go面试总结">
        Go面试总结 <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
     
     
     





<script src="https://utteranc.es/client.js"
        repo="shankusu2017@gmail.com/"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
<noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    <section class="site-overview sidebar-panel  sidebar-panel-active ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="http://shanks.link/img/logo.jpg"
        alt="shankusu2017@gmail.com" />
    <p class="site-author-name" itemprop="name">shankusu2017@gmail.com</p>
    <p class="site-description motion-element" itemprop="description"> </p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="http://shanks.link/post/">
        <span class="site-state-item-count">412</span>
        <span class="site-state-item-name">日志</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="http://shanks.link/categories/">      
         
        <span class="site-state-item-count">24</span>
        
        <span class="site-state-item-name">分类</span>
        
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="http://shanks.link/tags/">
         
        <span class="site-state-item-count">30</span>
        
        <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>
      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/shankusu2017" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
</div>


      

      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5b4f2ucxar6&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2022</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">愿星光伴你左右</span>
</div>
<div class="powered-by">
  Powered by - <a class="theme-link" href="http://gohugo.io" target="_blank" title="hugo" >Hugo v0.92.1</a>
</div>
<div class="theme-info">
  Theme by - <a class="theme-link" href="https://github.com/xtfly/hugo-theme-next" target="_blank"> NexT
  </a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="http://shanks.link/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="http://shanks.link/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="http://shanks.link/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="http://shanks.link/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="http://shanks.link/js/utils.js"></script>
<script type="text/javascript" src="http://shanks.link/js/motion.js"></script>
<script type="text/javascript" src="http://shanks.link/js/affix.js"></script>
<script type="text/javascript" src="http://shanks.link/js/schemes/pisces.js"></script>

<script type="text/javascript" src="http://shanks.link/js/scrollspy.js"></script>
<script type="text/javascript" src="http://shanks.link/js/post-details.js"></script>
<script type="text/javascript" src="http://shanks.link/js/toc.js"></script>

<script type="text/javascript" src="http://shanks.link/js/bootstrap.js"></script>

<script type="text/javascript" src="http://shanks.link/js/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
</body>
</html>