<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>Installing Go from source and cross compile - Golang编程语言知识介绍</title>
    <meta name="keywords" content="git,Git,Lua,lua,Golang,go">
    
    <meta property="og:title" content="Installing Go from source and cross compile">
    <meta property="og:site_name" content="Golang编程语言知识介绍">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="Installing Go from source and cross compile - Golang编程语言知识介绍" />
    <meta name="description" content="愿星光伴你左右"> 
    <link rel="shortcut icon" href="http://shanks.link/img/favicon.ico" />
    <link rel="apple-touch-icon" href="http://shanks.link/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="http://shanks.link/img/apple-touch-icon.png" />
    <link href="http://shanks.link/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/css/main.css" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/css/syntax.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="http://shanks.link/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Golang编程语言知识介绍</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="http://shanks.link/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/todo/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />todo
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/thinking/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />思考
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/life/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />life
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/food/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />food
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/os/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OS
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/lua/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />lua
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/redis/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />redis
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/go/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Golang
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/c/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />C
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/tcpip/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />TCP/IP
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/ebpf/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />ebpf
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/p4/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />p4
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/openvpn/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OpenVPN
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/ipsec/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />IPSec
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/l2tp/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />L2TP
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/dns/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />DNS
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/distributed/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />distributed
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/web/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />web
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/openwrt/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OpenWRT
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/%E8%BF%90%E7%BB%B4/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />运维
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/git/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />Git
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/%E9%B8%9F%E5%93%A5%E7%9A%84%E7%A7%81%E6%88%BF%E8%8F%9C/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />鸟哥的私房菜
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/it/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />IT杂谈
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/finance/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />投资
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />About Me
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/links/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />友情链接
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/ftp/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />FTP
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2022/11/08/installing-go-from-source-and-cross-compile/" itemprop="url">
        Installing Go from source and cross compile
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2022-11-08">
    2022-11-08
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/go" itemprop="url" rel="index">
        <span itemprop="name">go</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">2445 字 ~5分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <p>This topic describes how to build and run Go from source code. To install with an installer, see <a href="https://go.dev/doc/install">Download and install</a>.</p>
<h2 id="introduction">Introduction</h2>
<p>Go is an open source project, distributed under a <a href="https://go.dev/LICENSE">BSD-style license</a>. This document explains how to check out the sources, build them on your own machine, and run them.</p>
<p>Most users don&rsquo;t need to do this, and will instead install from precompiled binary packages as described in <a href="https://go.dev/doc/install">Download and install</a>, a much simpler process. If you want to help develop what goes into those precompiled packages, though, read on.</p>
<p>There are two official Go compiler toolchains. This document focuses on the <code>gc</code> Go compiler and tools. For information on how to work on <code>gccgo</code>, a more traditional compiler using the GCC back end, see <a href="https://go.dev/doc/install/gccgo">Setting up and using gccgo</a>.</p>
<p>The Go compilers support the following instruction sets:</p>
<ul>
<li>
<p><code>amd64</code>, <code>386</code></p>
<p>The <code>x86</code> instruction set, 64- and 32-bit.</p>
</li>
<li>
<p><code>arm64</code>, <code>arm</code></p>
<p>The <code>ARM</code> instruction set, 64-bit (<code>AArch64</code>) and 32-bit.</p>
</li>
<li>
<p><code>loong64</code></p>
<p>The 64-bit LoongArch instruction set.</p>
</li>
<li>
<p><code>mips64</code>, <code>mips64le</code>, <code>mips</code>, <code>mipsle</code></p>
<p>The <code>MIPS</code> instruction set, big- and little-endian, 64- and 32-bit.</p>
</li>
<li>
<p><code>ppc64</code>, <code>ppc64le</code></p>
<p>The 64-bit PowerPC instruction set, big- and little-endian.</p>
</li>
<li>
<p><code>riscv64</code></p>
<p>The 64-bit RISC-V instruction set.</p>
</li>
<li>
<p><code>s390x</code></p>
<p>The IBM z/Architecture.</p>
</li>
<li>
<p><code>wasm</code></p>
<p><a href="https://webassembly.org/">WebAssembly</a>.</p>
</li>
</ul>
<p>The compilers can target the AIX, Android, DragonFly BSD, FreeBSD, Illumos, Linux, macOS/iOS (Darwin), NetBSD, OpenBSD, Plan 9, Solaris, and Windows operating systems (although not all operating systems support all architectures).</p>
<p>A list of ports which are considered &ldquo;first class&rdquo; is available at the <a href="https://go.dev/wiki/PortingPolicy#first-class-ports">first class ports</a> wiki page.</p>
<p>The full set of supported combinations is listed in the discussion of <a href="https://go.dev/doc/install/source#environment">environment variables</a> below.</p>
<p>See the main installation page for the <a href="https://go.dev/doc/install#requirements">overall system requirements</a>. The following additional constraints apply to systems that can be built only from source:</p>
<ul>
<li>For Linux on PowerPC 64-bit, the minimum supported kernel version is 2.6.37, meaning that Go does not support CentOS 6 on these systems.</li>
</ul>
<h2 id="install-go-compiler-binaries-for-bootstrap">Install Go compiler binaries for bootstrap</h2>
<p>The Go toolchain is written in Go. To build it, you need a Go compiler installed. The scripts that do the initial build of the tools look for a &ldquo;go&rdquo; command in <code>$PATH</code>, so as long as you have Go installed in your system and configured in your <code>$PATH</code>, you are ready to build Go from source. Or if you prefer you can set <code>$GOROOT_BOOTSTRAP</code> to the root of a Go installation to use to build the new Go toolchain; <code>$GOROOT_BOOTSTRAP/bin/go</code> should be the go command to use.</p>
<p>There are four possible ways to obtain a bootstrap toolchain:</p>
<ul>
<li>Download a recent binary release of Go.</li>
<li>Cross-compile a toolchain using a system with a working Go installation.</li>
<li>Use gccgo.</li>
<li>Compile a toolchain from Go 1.4, the last Go release with a compiler written in C.</li>
</ul>
<p>These approaches are detailed below.</p>
<h3 id="bootstrap-toolchain-from-binary-release">Bootstrap toolchain from binary release</h3>
<p>To use a binary release as a bootstrap toolchain, see <a href="https://go.dev/dl/">the downloads page</a> or use any other packaged Go distribution.</p>
<h3 id="bootstrap-toolchain-from-cross-compiled-source">Bootstrap toolchain from cross-compiled source</h3>
<p>To cross-compile a bootstrap toolchain from source, which is necessary on systems Go 1.4 did not target (for example, <code>linux/ppc64le</code>), install Go on a different system and run <a href="https://go.dev/src/bootstrap.bash">bootstrap.bash</a>.</p>
<p>When run as (for example)</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$ GOOS=linux GOARCH=ppc64 ./bootstrap.bash
</code></pre></div><p><code>bootstrap.bash</code> cross-compiles a toolchain for that <code>GOOS/GOARCH</code> combination, leaving the resulting tree in <code>../../go-${GOOS}-${GOARCH}-bootstrap</code>. That tree can be copied to a machine of the given target type and used as <code>GOROOT_BOOTSTRAP</code> to bootstrap a local build.</p>
<h3 id="bootstrap-toolchain-using-gccgo">Bootstrap toolchain using gccgo</h3>
<p>To use gccgo as the bootstrap toolchain, you need to arrange for <code>$GOROOT_BOOTSTRAP/bin/go</code> to be the go tool that comes as part of gccgo 5. For example on Ubuntu Vivid:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$ sudo apt-get install gccgo-5
$ sudo update-alternatives --set go /usr/bin/go-5
$ GOROOT_BOOTSTRAP=/usr ./make.bash
</code></pre></div><h3 id="bootstrap-toolchain-from-c-source-code">Bootstrap toolchain from C source code</h3>
<p>To build a bootstrap toolchain from C source code, use either the git branch <code>release-branch.go1.4</code> or <a href="https://dl.google.com/go/go1.4-bootstrap-20171003.tar.gz">go1.4-bootstrap-20171003.tar.gz</a>, which contains the Go 1.4 source code plus accumulated fixes to keep the tools running on newer operating systems. (Go 1.4 was the last distribution in which the toolchain was written in C.) After unpacking the Go 1.4 source, <code>cd</code> to the <code>src</code> subdirectory, set <code>CGO_ENABLED=0</code> in the environment, and run <code>make.bash</code> (or, on Windows, <code>make.bat</code>).</p>
<p>Once the Go 1.4 source has been unpacked into your GOROOT_BOOTSTRAP directory, you must keep this git clone instance checked out to branch <code>release-branch.go1.4</code>. Specifically, do not attempt to reuse this git clone in the later step named &ldquo;Fetch the repository.&rdquo; The go1.4 bootstrap toolchain <strong>must be able</strong> to properly traverse the go1.4 sources that it assumes are present under this repository root.</p>
<p>Note that Go 1.4 does not run on all systems that later versions of Go do. In particular, Go 1.4 does not support current versions of macOS. On such systems, the bootstrap toolchain must be obtained using one of the other methods.</p>
<h2 id="install-git-if-needed">Install Git, if needed</h2>
<p>To perform the next step you must have Git installed. (Check that you have a <code>git</code> command before proceeding.)</p>
<p>If you do not have a working Git installation, follow the instructions on the <a href="https://git-scm.com/downloads">Git downloads</a> page.</p>
<h2 id="optional-install-a-c-compiler">(Optional) Install a C compiler</h2>
<p>To build a Go installation with <code>cgo</code> support, which permits Go programs to import C libraries, a C compiler such as <code>gcc</code> or <code>clang</code> must be installed first. Do this using whatever installation method is standard on the system.</p>
<p>To build without <code>cgo</code>, set the environment variable <code>CGO_ENABLED=0</code> before running <code>all.bash</code> or <code>make.bash</code>.</p>
<h2 id="fetch-the-repository">Fetch the repository</h2>
<p>Change to the directory where you intend to install Go, and make sure the <code>goroot</code> directory does not exist. Then clone the repository and check out the latest release tag (<code>go1.12</code>, for example):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$ git clone https://go.googlesource.com/go goroot
$ cd goroot
$ git checkout &lt;tag&gt;
</code></pre></div><p>Where <code>&lt;tag&gt;</code> is the version string of the release.</p>
<p>Go will be installed in the directory where it is checked out. For example, if Go is checked out in <code>$HOME/goroot</code>, executables will be installed in <code>$HOME/goroot/bin</code>. The directory may have any name, but note that if Go is checked out in <code>$HOME/go</code>, it will conflict with the default location of <code>$GOPATH</code>. See <a href="https://go.dev/doc/install/source#gopath"><code>GOPATH</code></a> below.</p>
<p>Reminder: If you opted to also compile the bootstrap binaries from source (in an earlier section), you still need to <code>git clone</code> again at this point (to checkout the latest <code>&lt;tag&gt;</code>), because you must keep your go1.4 repository distinct.</p>
<h2 id="optional-switch-to-the-master-branch">(Optional) Switch to the master branch</h2>
<p>If you intend to modify the go source code, and <a href="https://go.dev/doc/contribute.html">contribute your changes</a> to the project, then move your repository off the release tag, and onto the master (development) branch. Otherwise, skip this step.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$ git checkout master
</code></pre></div><h2 id="install-go">Install Go</h2>
<p>To build the Go distribution, run</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$ cd src
$ ./all.bash
</code></pre></div><p>(To build under Windows use <code>all.bat</code>.)</p>
<p>If all goes well, it will finish by printing output like:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">ALL TESTS PASSED

---
Installed Go for linux/amd64 in /home/you/go.
Installed commands in /home/you/go/bin.
*** You need to add /home/you/go/bin to your $PATH. ***
</code></pre></div><p>where the details on the last few lines reflect the operating system, architecture, and root directory used during the install.</p>
<p>For more information about ways to control the build, see the discussion of <a href="https://go.dev/doc/install/source#environment">environment variables</a> below. <code>all.bash</code> (or <code>all.bat</code>) runs important tests for Go, which can take more time than simply building Go. If you do not want to run the test suite use <code>make.bash</code> (or <code>make.bat</code>) instead.</p>
<h2 id="testing-your-installation">Testing your installation</h2>
<p>Check that Go is installed correctly by building a simple program.</p>
<p>Create a file named <code>hello.go</code> and put the following program in it:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00f">package</span> main

<span style="color:#00f">import</span> <span style="color:#009c00">&#34;fmt&#34;</span>

<span style="color:#00f">func</span> <span style="color:#c34e00">main</span>() {
	fmt.<span style="color:#c34e00">Printf</span>(<span style="color:#009c00">&#34;hello, world\n&#34;</span>)
}
</code></pre></div><p>Then run it with the <code>go</code> tool:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$ go run hello.go
hello, world
</code></pre></div><p>If you see the &ldquo;hello, world&rdquo; message then Go is installed correctly.</p>
<h2 id="set-up-your-work-environment">Set up your work environment</h2>
<p>You&rsquo;re almost done. You just need to do a little more setup.</p>
<p><a href="https://go.dev/doc/code.html"><strong>How to Write Go Code</strong>Learn how to set up and use the Go tools</a></p>
<p>The <a href="https://go.dev/doc/code.html">How to Write Go Code</a> document provides <strong>essential setup instructions</strong> for using the Go tools.</p>
<h2 id="install-additional-tools">Install additional tools</h2>
<p>The source code for several Go tools (including <a href="https://pkg.go.dev/golang.org/x/tools/gopls">gopls</a>) is kept in <a href="https://golang.org/x/tools">the golang.org/x/tools repository</a>. To install one of the tools (<code>gopls</code> in this case):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$ go install golang.org/x/tools/gopls@latest
</code></pre></div><h2 id="community-resources">Community resources</h2>
<p>The usual community resources listed on the <a href="https://go.dev/help/">help page</a> have active developers that can help you with problems with your installation or your development work. For those who wish to keep up to date, there is another mailing list, <a href="https://groups.google.com/group/golang-checkins">golang-checkins</a>, that receives a message summarizing each checkin to the Go repository.</p>
<p>Bugs can be reported using the <a href="https://go.dev/issue/new">Go issue tracker</a>.</p>
<h2 id="keeping-up-with-releases">Keeping up with releases</h2>
<p>New releases are announced on the <a href="https://groups.google.com/group/golang-announce">golang-announce</a> mailing list. Each announcement mentions the latest release tag, for instance, <code>go1.9</code>.</p>
<p>To update an existing tree to the latest release, you can run:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$ cd go/src
$ git fetch
$ git checkout &lt;tag&gt;
$ ./all.bash
</code></pre></div><p>Where <code>&lt;tag&gt;</code> is the version string of the release.</p>
<h2 id="optional-environment-variables">Optional environment variables</h2>
<p>The Go compilation environment can be customized by environment variables. <em>None is required by the build</em>, but you may wish to set some to override the defaults.</p>
<ul>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOROOT
</code></pre></div><p>The root of the Go tree, often <code>$HOME/go1.X</code>. Its value is built into the tree when it is compiled, and defaults to the parent of the directory where <code>all.bash</code> was run. There is no need to set this unless you want to switch between multiple local copies of the repository.</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOROOT_FINAL
</code></pre></div><p>The value assumed by installed binaries and scripts when <code>$GOROOT</code> is not set explicitly. It defaults to the value of <code>$GOROOT</code>. If you want to build the Go tree in one location but move it elsewhere after the build, set <code>$GOROOT_FINAL</code> to the eventual location.</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOPATH
</code></pre></div><p>The directory where Go projects outside the Go distribution are typically checked out. For example, <code>golang.org/x/tools</code> might be checked out to <code>$GOPATH/src/golang.org/x/tools</code>. Executables outside the Go distribution are installed in <code>$GOPATH/bin</code> (or <code>$GOBIN</code>, if set). Modules are downloaded and cached in <code>$GOPATH/pkg/mod</code>.</p>
<p>The default location of <code>$GOPATH</code> is <code>$HOME/go</code>, and it&rsquo;s not usually necessary to set <code>GOPATH</code> explicitly. However, if you have checked out the Go distribution to <code>$HOME/go</code>, you must set <code>GOPATH</code> to another location to avoid conflicts.</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOBIN
</code></pre></div><p>The directory where executables outside the Go distribution are installed using the <a href="https://go.dev/cmd/go">go command</a>. For example, <code>go install golang.org/x/tools/cmd/godoc@latest</code> downloads, builds, and installs <code>$GOBIN/godoc</code>. By default, <code>$GOBIN</code> is <code>$GOPATH/bin</code> (or <code>$HOME/go/bin</code> if <code>GOPATH</code> is not set). After installing, you will want to add this directory to your <code>$PATH</code> so you can use installed tools.</p>
<p>Note that the Go distribution&rsquo;s executables are installed in <code>$GOROOT/bin</code> (for executables invoked by people) or <code>$GOTOOLDIR</code> (for executables invoked by the go command; defaults to <code>$GOROOT/pkg/$GOOS_$GOARCH</code>) instead of <code>$GOBIN</code>.</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOOS and $GOARCH
</code></pre></div><p>The name of the target operating system and compilation architecture. These default to the values of <code>$GOHOSTOS</code> and <code>$GOHOSTARCH</code> respectively (described below).</p>
<p>Choices for <code>$GOOS</code> are <code>android</code>, <code>darwin</code>, <code>dragonfly</code>, <code>freebsd</code>, <code>illumos</code>, <code>ios</code>, <code>js</code>, <code>linux</code>, <code>netbsd</code>, <code>openbsd</code>, <code>plan9</code>, <code>solaris</code> and <code>windows</code>.</p>
<p>Choices for <code>$GOARCH</code> are <code>amd64</code> (64-bit x86, the most mature port), <code>386</code> (32-bit x86), <code>arm</code> (32-bit ARM), <code>arm64</code> (64-bit ARM), <code>ppc64le</code> (PowerPC 64-bit, little-endian), <code>ppc64</code> (PowerPC 64-bit, big-endian), <code>mips64le</code> (MIPS 64-bit, little-endian), <code>mips64</code> (MIPS 64-bit, big-endian), <code>mipsle</code> (MIPS 32-bit, little-endian), <code>mips</code> (MIPS 32-bit, big-endian), <code>s390x</code> (IBM System z 64-bit, big-endian), and <code>wasm</code> (WebAssembly 32-bit).</p>
<p>The valid combinations of <code>$GOOS</code> and <code>$GOARCH</code> are:</p>
<table>
<thead>
<tr>
<th></th>
<th><code>$GOOS</code></th>
<th><code>$GOARCH</code></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><code>aix</code></td>
<td><code>ppc64</code></td>
</tr>
<tr>
<td></td>
<td><code>android</code></td>
<td><code>386</code></td>
</tr>
<tr>
<td></td>
<td><code>android</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>android</code></td>
<td><code>arm</code></td>
</tr>
<tr>
<td></td>
<td><code>android</code></td>
<td><code>arm64</code></td>
</tr>
<tr>
<td></td>
<td><code>darwin</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>darwin</code></td>
<td><code>arm64</code></td>
</tr>
<tr>
<td></td>
<td><code>dragonfly</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>freebsd</code></td>
<td><code>386</code></td>
</tr>
<tr>
<td></td>
<td><code>freebsd</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>freebsd</code></td>
<td><code>arm</code></td>
</tr>
<tr>
<td></td>
<td><code>illumos</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>ios</code></td>
<td><code>arm64</code></td>
</tr>
<tr>
<td></td>
<td><code>js</code></td>
<td><code>wasm</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>386</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>arm</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>arm64</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>loong64</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>mips</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>mipsle</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>mips64</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>mips64le</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>ppc64</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>ppc64le</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>riscv64</code></td>
</tr>
<tr>
<td></td>
<td><code>linux</code></td>
<td><code>s390x</code></td>
</tr>
<tr>
<td></td>
<td><code>netbsd</code></td>
<td><code>386</code></td>
</tr>
<tr>
<td></td>
<td><code>netbsd</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>netbsd</code></td>
<td><code>arm</code></td>
</tr>
<tr>
<td></td>
<td><code>openbsd</code></td>
<td><code>386</code></td>
</tr>
<tr>
<td></td>
<td><code>openbsd</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>openbsd</code></td>
<td><code>arm</code></td>
</tr>
<tr>
<td></td>
<td><code>openbsd</code></td>
<td><code>arm64</code></td>
</tr>
<tr>
<td></td>
<td><code>plan9</code></td>
<td><code>386</code></td>
</tr>
<tr>
<td></td>
<td><code>plan9</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>plan9</code></td>
<td><code>arm</code></td>
</tr>
<tr>
<td></td>
<td><code>solaris</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>windows</code></td>
<td><code>386</code></td>
</tr>
<tr>
<td></td>
<td><code>windows</code></td>
<td><code>amd64</code></td>
</tr>
<tr>
<td></td>
<td><code>windows</code></td>
<td><code>arm</code></td>
</tr>
<tr>
<td></td>
<td><code>windows</code></td>
<td><code>arm64</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOHOSTOS and $GOHOSTARCH
</code></pre></div><p>The name of the host operating system and compilation architecture. These default to the local system&rsquo;s operating system and architecture.</p>
<p>Valid choices are the same as for <code>$GOOS</code> and <code>$GOARCH</code>, listed above. The specified values must be compatible with the local system. For example, you should not set <code>$GOHOSTARCH</code> to <code>arm</code> on an x86 system.</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GO386 (for 386 only, defaults to sse2 )
</code></pre></div><p>This variable controls how gc implements floating point computations.</p>
<ul>
<li><code>GO386=softfloat</code>: use software floating point operations; should support all x86 chips (Pentium MMX or later).</li>
<li><code>GO386=sse2</code>: use SSE2 for floating point operations; has better performance but only available on Pentium 4/Opteron/Athlon 64 or later.</li>
</ul>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOARM (for arm
</code></pre></div><p>only; default is auto-detected if building on the target processor, 6 if not)</p>
<p>This sets the ARM floating point co-processor architecture version the run-time should target. If you are compiling on the target system, its value will be auto-detected.</p>
<ul>
<li><code>GOARM=5</code>: use software floating point; when CPU doesn&rsquo;t have VFP co-processor</li>
<li><code>GOARM=6</code>: use VFPv1 only; default if cross compiling; usually ARM11 or better cores (VFPv2 or better is also supported)</li>
<li><code>GOARM=7</code>: use VFPv3; usually Cortex-A cores</li>
</ul>
<p>If in doubt, leave this variable unset, and adjust it if required when you first run the Go executable. The <a href="https://go.dev/wiki/GoArm">GoARM</a> page on the <a href="https://go.dev/wiki">Go community wiki</a> contains further details regarding Go&rsquo;s ARM support.</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOAMD64 (for amd64 only; default is v1)
</code></pre></div><p>This sets the microarchitecture level for which to compile. Valid values are <code>v1</code> (default), <code>v2</code>, <code>v3</code>, <code>v4</code>. See <a href="https://go.dev/wiki/MinimumRequirements#amd64">the Go wiki MinimumRequirements page</a> for more information.</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOMIPS (for mips and mipsle only)
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">$GOMIPS64 (for mips64 and mips64le only)
</code></pre></div><p>These variables set whether to use floating point instructions. Set to &ldquo;<code>hardfloat</code>&rdquo; to use floating point instructions; this is the default. Set to &ldquo;<code>softfloat</code>&rdquo; to use soft floating point.</p>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOPPC64(for ppc64 and ppc64le only)
</code></pre></div><p>This variable sets the processor level (i.e. Instruction Set Architecture version) for which the compiler will target. The default is <code>power8</code>.</p>
<ul>
<li><code>GOPPC64=power8</code>: generate ISA v2.07 instructions</li>
<li><code>GOPPC64=power9</code>: generate ISA v3.00 instructions</li>
</ul>
</li>
<li>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">  $GOWASM(for wasm only)
</code></pre></div><p>This variable is a comma separated list of <a href="https://github.com/WebAssembly/proposals">experimental WebAssembly features</a> that the compiled WebAssembly binary is allowed to use. The default is to use no experimental features.</p>
<ul>
<li><code>GOWASM=satconv</code>: generate <a href="https://github.com/WebAssembly/nontrapping-float-to-int-conversions/blob/master/proposals/nontrapping-float-to-int-conversion/Overview.md">saturating (non-trapping) float-to-int conversions</a></li>
<li><code>GOWASM=signext</code>: generate <a href="https://github.com/WebAssembly/sign-extension-ops/blob/master/proposals/sign-extension-ops/Overview.md">sign-extension operators</a></li>
</ul>
</li>
</ul>
<p>Note that <code>$GOARCH</code> and <code>$GOOS</code> identify the <em>target</em> environment, not the environment you are running on. In effect, you are always cross-compiling. By architecture, we mean the kind of binaries that the target environment can run: an x86-64 system running a 32-bit-only operating system must set <code>GOARCH</code> to <code>386</code>, not <code>amd64</code>.</p>
<p>If you choose to override the defaults, set these variables in your shell profile (<code>$HOME/.bashrc</code>, <code>$HOME/.profile</code>, or equivalent). The settings might look something like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">export GOARCH=amd64
export GOOS=linux
</code></pre></div><p>although, to reiterate, none of these variables needs to be set to build, install, and develop the Go tree.</p>
<p><a href="https://google.com/">https://google.com/</a>)</p>
<p><a href="https://go.dev/doc/install/source#environment">以上内容转载自本链接，并标明出去若有侵权请联系站长</a></p>

    </div>
    <footer class="post-footer">
     
 
<div class="post-tags">     
     
    <a href="http://shanks.link/tags/go" rel="tag" title="go">#go#</a>
    
</div>



     <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="http://shanks.link/blog/2022/11/12/%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0%E4%B9%8B-%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0-shell-scripts/" rel="next" title="基础学习之 第十二章 Shell Scripts">
        <i class="fa fa-chevron-left"></i> 基础学习之 第十二章 Shell Scripts
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="http://shanks.link/blog/2022/11/08/%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E8%AE%BE%E4%B9%8B-%E7%AC%AC%E5%85%AB%E7%AB%A0-%E8%B7%AF%E7%94%B1%E5%99%A8%E6%A6%82%E5%BF%B5%E4%B8%8E%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E8%AE%BE%E5%AE%9A/" rel="prev" title="服务器架设之 第八章 路由器概念与路由器的设定">
        服务器架设之 第八章 路由器概念与路由器的设定 <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
     
     
     





<script src="https://utteranc.es/client.js"
        repo="shankusu2017@gmail.com/"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
<noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    <section class="site-overview sidebar-panel  sidebar-panel-active ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="http://shanks.link/img/logo.jpg"
        alt="shankusu2017@gmail.com" />
    <p class="site-author-name" itemprop="name">shankusu2017@gmail.com</p>
    <p class="site-description motion-element" itemprop="description"> </p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
        <a href="http://shanks.link/post/">
            <span class="site-state-item-name">日志</span>
        </a>
    </div>
    <div class="site-state-item site-state-categories">
        <a href="http://shanks.link/categories/">
            <span class="site-state-item-name">分类</span>
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="http://shanks.link/tags/">
            <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>

      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/shankusu2017" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
</div>


      

      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5b4f2ucxar6&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2025</span>
</div>
<div>
  <a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">粤ICP备2021068940号-1</a>
  <a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44011302003059" rel="noopener" target="_blank">粤公网安备44011302003059</a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="http://shanks.link/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="http://shanks.link/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="http://shanks.link/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="http://shanks.link/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="http://shanks.link/js/utils.js"></script>
<script type="text/javascript" src="http://shanks.link/js/motion.js"></script>
<script type="text/javascript" src="http://shanks.link/js/affix.js"></script>
<script type="text/javascript" src="http://shanks.link/js/schemes/pisces.js"></script>

<script type="text/javascript" src="http://shanks.link/js/scrollspy.js"></script>
<script type="text/javascript" src="http://shanks.link/js/post-details.js"></script>
<script type="text/javascript" src="http://shanks.link/js/toc.js"></script>

<script type="text/javascript" src="http://shanks.link/js/bootstrap.js"></script>

<script type="text/javascript" src="http://shanks.link/js/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
</body>
</html>