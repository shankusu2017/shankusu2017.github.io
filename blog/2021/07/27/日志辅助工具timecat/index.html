<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
    <title>日志辅助工具timecat - 愿星光伴你左右</title>
    <meta name="keywords" content="Lua,lua,Golang,go">
    
    <meta property="og:title" content="日志辅助工具timecat">
    <meta property="og:site_name" content="愿星光伴你左右">
    <meta property="og:image" content="/img/author.jpg"> 
    <meta name="title" content="日志辅助工具timecat - 愿星光伴你左右" />
    <meta name="description" content="愿星光伴你左右"> 
    <link rel="shortcut icon" href="http://shanks.link/img/favicon.ico" />
    <link rel="apple-touch-icon" href="http://shanks.link/img/apple-touch-icon.png" />
    <link rel="apple-touch-icon-precomposed" href="http://shanks.link/img/apple-touch-icon.png" />
    <link href="http://shanks.link/js/vendor/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/js/vendor/fancybox/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/css/main.css" rel="stylesheet" type="text/css" />
    <link href="http://shanks.link/css/syntax.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
     fancybox: true, 
    motion: true
  };
</script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">
<div class="container one-collumn sidebar-position-left page-home  ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-meta  custom-logo ">

  <div class="custom-logo-site-title">
    <a href="http://shanks.link/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">愿星光伴你左右</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
    <ul id="menu" class="menu">
      
      
        <li class="menu-item ">
          <a href="http://shanks.link/post/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/prose/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />散文
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/%E7%94%9F%E6%B4%BB/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />生活
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/thinking/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />随想录
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/os/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OS
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/go/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Golang
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/lua/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />lua
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/openvpn/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />OpenVPN
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/redis/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />redis
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/categories/%E8%BF%90%E7%BB%B4/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />运维
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/about/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />About Me
          </a>
        </li>
      
        <li class="menu-item ">
          <a href="http://shanks.link/links/" rel="section">
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />友情链接
          </a>
        </li>
      
      <li class="menu-item menu-item-search">
        <a href="javascript:;" class="popup-trigger"> <i class="menu-item-icon fa fa-search fa-fw"></i> <br /> 搜索</a>
      </li>
    </ul>
    <div class="site-search">
      <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
<section id="posts" class="posts-expand">
  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
      <h1 class="post-title" itemprop="name headline">
        <a class="post-title-link" href="http://shanks.link/blog/2021/07/27/%E6%97%A5%E5%BF%97%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7timecat/" itemprop="url">
        日志辅助工具timecat
        </a>
      </h1>
      <div class="post-meta">
      <span class="post-time">
<span class="post-meta-item-icon">
    <i class="fa fa-calendar-o"></i>
</span>
<span class="post-meta-item-text">时间：</span>
<time itemprop="dateCreated" datetime="2016-03-22T13:04:35+08:00" content="2021-07-27">
    2021-07-27
</time>
</span> 
      

  <span class="post-category" >
  &nbsp; | &nbsp;
  <span class="post-meta-item-icon">
    <i class="fa fa-folder-o"></i>
  </span>
  <span class="post-meta-item-text">分类：</span>
  
    <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
      <a href="http://shanks.link/categories/%E8%BF%90%E7%BB%B4" itemprop="url" rel="index">
        <span itemprop="name">运维</span>
      </a>
      &nbsp; 
    </span>
  
</span>


       <span>
&nbsp; | &nbsp;
<span class="post-meta-item-icon">
    <i class="fa fa-eye"></i>
</span>
<span class="post-meta-item-text">阅读：</span>
<span class="leancloud-visitors-count">4385 字 ~9分钟</span>
</span>
      </div>
    </header>
    <div class="post-body" itemprop="articleBody">
    <h2 id="日志辅助工具timecat">日志辅助工具timecat</h2>
<p><a href="">字节跳动技术团队</a> <em>2017-09-08</em></p>
<p>今天我要分享一个用于对日志文件进行二分查找的工具：timecat</p>
<h2 id="0-用途">0 用途</h2>
<p>在线演示页面：http://aap.reetsee.com/page/timecat</p>
<p>不想看后面的直接看这一节就行。</p>
<p>timecat可以对线上的所有日志进行二分查找，常见需求是到了线上机器后想将某个时间段的日志直接读出来，不要用head、tail、grep或者awk了，不仅速度比不上timecat，光想着grep和awk的命令怎么构造的时候，用timecat结果都出来了（不是吹啊，真的）。</p>
<p>例如要得到9月6号19:13:14到9月6号19:19:10的日志中包含关键字『Super Saiyajin』的日志，这样写就行了：</p>
<p><img src="http://shanks.link/img/timecat/1.png" alt="img"></p>
<p>要直接把这个时间段的日志导出来就更简单了:</p>
<p><img src="http://shanks.link/img/timecat/2.png" alt="img"></p>
<p>timecat在线上所有的机器都有，在自己电脑上通过 pip install timecat 就能安装。</p>
<p><strong>对日志格式有要求吗</strong>：有序且里面包含时间信息就行，基本上就是没有要求，因为连时间的格式timecat都是自动识别的，只要输入的是常用的时间日期格式都能自动帮你转换成日志中的格式进行搜索，例如你也可以这样写：</p>
<p><img src="http://shanks.link/img/timecat/3.png" alt="img"></p>
<p><strong>能够对流式日志生效吗</strong>：Zan nian da mie da，很遗憾不行呢，必须得是seekable的才行。</p>
<p><strong>还有啥功能</strong>：没啥了，剩下的参数倒是还有几个，欢迎使用timecat -h查看。</p>
<p>差不多就这些了，顺便把tracegrep这个工具也说一下，对于一个Python日志，快速地获取日志中所有的exception调用栈可以这么写：</p>
<p><img src="http://shanks.link/img/timecat/4.png" alt="img"></p>
<p>如果想排除某些exception，可以这么写:</p>
<p><img src="http://shanks.link/img/timecat/5.png" alt="img"></p>
<p>tracegrep是可以对流式日志生效的，所以发挥一下想象力也可以这样：</p>
<p><img src="http://shanks.link/img/timecat/6.png" alt="img"></p>
<p>（然而这其实并不需要想象力····）</p>
<p>所以看完这里起始就已经没啥使用上的问题了。再往下的内容主要就是把上面的东西用啰嗦的方式重写了一遍，还有对awk、grep做了下PK，也就是Benchmark，跑分。用来打发时间还是不错的，比较忙的到此为止就行。</p>
<hr>
<h2 id="1-背景">1 背景</h2>
<p>（感动啊，真的有人看到这儿了，我得换一个认真点的姿势来写下面的内容了，咳咳&hellip;）</p>
<p><img src="http://shanks.link/img/timecat/7.png" alt="img"></p>
<p>今天我要分享一个用于对日志文件进行二分查找的工具：timecat 安装方式很简单，只要你安装了Python 2，那么可以直接在命令行执行如下pip命令：</p>
<p><img src="http://shanks.link/img/timecat/8.png" alt="img"></p>
<p>或者直接下载源码中的timecat，执行即可</p>
<p>不过在开始执行前，先进行提问：</p>
<p><img src="http://shanks.link/img/timecat/9.png" alt="img"></p>
<p>以前头条的线上环境中，大部分日志切分是按照一天一次的方式进行。也就是说，在每台机器上2016年1月2号的日志全部打到一个文件，2016年1月3号的日志全部打到一个文件，目前我看到最大的一个单一日志文件，大小就是28G。</p>
<p>继续上面的例子，现在我们要在线上的所有机器上，搜 20点13分14秒 到 20点14分13秒 之间的这个日志中的某个关键字，并且把包含这个关键字的日志都输出。如果偷点懒，你可以直接使用grep命令去搜这个文件，但这样给定的时间范围这个条件就没用上了，因为grep会从0点开始搜。这样实际在做无用功，时间久不说，还会浪费大量的磁盘I/O。</p>
<p>并且，我们最终是要搜索线上的（部分或所有）机器，应该尽可能减少执行操作时对机器的影响。</p>
<p>所以，我们有几个基本的思路：</p>
<ul>
<li>碰到非搜索时间段内的日志时，直接跳过；</li>
<li>尽量减少对日志文件内容的逻辑判断，过多的判断会造成时间和CPU的浪费。</li>
</ul>
<h2 id="2-思路">2 思路</h2>
<p>还是以上面的例子继续思考。</p>
<p>其实可以这样，我们用awk命令去获取每一行的日期时间：</p>
<ul>
<li>当发现日期时间小于1月1号20点13分14秒，就直接跳过不处理；</li>
<li>当发现日期时间在这个区间 [ 1月1号20点13分14秒, 1月1号20点14分13秒 )，那么就用正则或者用grep去匹配一下有没有对应关键字，有就直接输出；</li>
<li>当发现日期时间大于等于1月1号20点14分13秒，就直接退出程序。</li>
</ul>
<p>看起来没啥问题，能省的好像都省了不少。不过还是不够，因为所有时间小于20点13分14秒的行，实际是没有必要读取的，同时在目标时间段内所有日志行，都进行了读取时间日期的操作。</p>
<p>如果日志文件本身是有序的，这些实际是可以省的，我只需要知道起始时间和结束时间在文件中的位置即可，然后读取这两个位置之间的内容并匹配关键字就行。</p>
<p>要直接对有序的内容进行元素定位，最好的方式之一就是使用二分查找。</p>
<h2 id="3-难点与细节">3 难点与细节</h2>
<p>思路都有，就是细节比较多，以下列出几个。</p>
<p>与传统的二分搜索不一样，日志文件中的每一条日志长度都是不一样的，我们使用 mid = start + (end - start) / 2 得到mid时，并不直接指向一行的行首。所以我们需要找到mid所在行的行首。</p>
<p>要解决死循环的问题，哪怕mid的值前后不一样，但是mid指向的行可能是一样的。</p>
<p>日志文件中可能包含非法的日志行，例如Python业务中，有些地方使用 logging.exception(&quot;&hellip;&quot;) 打印出来的调用栈就是多行的，而且每一行还没有日期时间。</p>
<p>有的日志文件可能是按升序排的，有的日志文件可能是按降序排的，这两种排序使用的比较运算是不一样的。</p>
<p>不同的日志文件可能有多种不同的日期时间格式，需要对这些日期时间进行格式判断。而且有的日期时间格式之间不能直接比较，例如 <strong>Jan 01 18:00:00</strong> 与 <strong>Apr 01 19:00:00</strong> ，谁比较大呢？直接按照字典序来说肯定是 <strong>Jan 01 18:00:00</strong> 这个日期大，而实际不是如此，类似的例子还有 <strong>12/30/2014 19:00:00</strong> 与 <strong>11/25/2015 20:00:00</strong> 。</p>
<p>当mid所对应的日志行为非法行时，我们需要顺序向下查找合法的行，如果向下查找失败，那么实际要从mid开始倒序查找，需要解决从文件的一个位置开始倒序读取内容的问题。</p>
<h2 id="4-使用timecat">4 使用timecat</h2>
<p>timecat的命名借鉴了Linux的cat命令，使用也非常简单，只要你有Python 2.x的版本就可以</p>
<h3 id="41-获取timecat">4.1 获取timecat</h3>
<p>有三种方式获取timecat，分别是用pip，用git，或者直接下载源码。如果你使用的是git下载的方式，还能够直接运行demo文件夹下的demo.sh来查看执行效果。下面给出操作步骤。</p>
<p><strong>通过pip获取</strong></p>
<p>如果你安装了pip那很赞（通常现在的Python都直接包含了pip），无论是在Mac还是在Linux上，都直接执行 pip install timecat 就可以了。</p>
<p><strong>通过git获取</strong></p>
<p>如果你没有安装pip，但是有git，那么就使用这条命令直接下载timecat的git仓库：</p>
<p><img src="http://shanks.link/img/timecat/10.png" alt="img"></p>
<p>这个时候你可以直接运行一下demo程序查看效果，执行如下命令就可以：</p>
<p><img src="http://shanks.link/img/timecat/11.png" alt="img"></p>
<p>应该能够看到如下输出：</p>
<p><img src="http://shanks.link/img/timecat/12.png" alt="img"></p>
<p>直接下载源码文件</p>
<p><img src="http://shanks.link/img/timecat/13.png" alt="img"></p>
<p>然后给timecat加上执行权限:</p>
<p><img src="http://shanks.link/img/timecat/14.png" alt="img"></p>
<p>大功告成，接下来就可以使用了。</p>
<h3 id="42-小试牛刀">4.2 小试牛刀</h3>
<p>假设你的日志文件如下所示：</p>
<p><img src="http://shanks.link/img/timecat/15.png" alt="img"></p>
<p>上面的日志是我用随机数生成的，把这个日志保存为demo.log。</p>
<p>这份文件中，日志的开始时间是从 2016-01-09 17:19:55 到 2016-01-09 17:20:13 ，我们通过以下三个任务来熟悉timecat。</p>
<h5 id="任务1获取2016-01-09-172001--2016-01-09-172003的日志"><strong>任务1：获取2016-01-09 17:20:01 ~ 2016-01-09 17:20:03的日志</strong></h5>
<p>如果你是通过pip获取timecat，那么执行以下命令：</p>
<p><img src="http://shanks.link/img/timecat/16.png" alt="img"></p>
<p>如果是通过git或者直接下载源码的方式获取，执行以下命令（下面不再赘述）:</p>
<p><img src="http://shanks.link/img/timecat/17.png" alt="img"></p>
<p>执行完毕后，应该看到如下结果：</p>
<p><img src="http://shanks.link/img/timecat/18.png" alt="img"></p>
<p>最终输出了从 17:19:55 到 17:20:01 的日志，为什么没有输出 17:20:03 的那行日志呢？因为timecat的时间区间是<strong>左闭右开</strong>的，所以最终不包括 17:20:03 的日志。 从这个例子，我们知道了运行timecat只需要指定3个参数：</p>
<ul>
<li>第一个参数是-s参数，它表示希望timecat获取日志的起始时间；</li>
<li>第二个参数是-e参数，它表示希望timecat获取日志的终止时间（不包括这个时间本身）；</li>
<li>第三个参数是文件的路径，这里可以指定多个文件路径。</li>
</ul>
<p>所以使用起来是非常简单的，要注意的是，-s与-e参数中指定的日期时间格式，因该与日志中出现的日期时间格式一致。</p>
<p>timecat会自动判断日期时间格式，无论你要搜的是syslog，nginx，apache，php，还是python等日志文件，都能自动判别出时间的格式而无需你手动再敲一次。</p>
<h5 id="任务2获取2016-01-09-171956--2016-01-09-172000的日志">任务2：获取2016-01-09 17:19:56 ~ 2016-01-09 17:20:00的日志</h5>
<p>直接执行命令：</p>
<p><img src="http://shanks.link/img/timecat/19.png" alt="img"></p>
<p>这时可以看到以下输出:</p>
<p><img src="http://shanks.link/img/timecat/20.png" alt="img"></p>
<p>这次我们使用的命令参数有点不一样，用了一个新的-d参数，这个参数实际是给大家偷懒用的，如果你的-s和-e里，年月日的部分是一样的，那么可以把它们抽出来统一用-d参数表示。</p>
<h5 id="任务3获取2016-01-09-172010--eof的日志">任务3：获取2016-01-09 17:20:10 ~ EOF的日志</h5>
<p>EOF就是一直到文件的末尾</p>
<p>执行以下命令：</p>
<p><img src="http://shanks.link/img/timecat/21.png" alt="img"></p>
<p>得到的输出结果如下:</p>
<p><img src="http://shanks.link/img/timecat/22.png" alt="img"></p>
<p>这次我们把-e参数省了，所以timecat就直接从起始时间开始一直读到EOF。</p>
<p>完成上面三个任务后，你就基本掌握了timecat的所有用法，是不是很容易？</p>
<p>最后再说说另外两个参数：</p>
<ol>
<li>一个是-v参数，用来打印额外信息的，这些信息包括：二分查找的循环次数，整个二分查找过程中一共扫描了多少行内容，最终二分查找出来的日志起始位置和结束位置到底是哪里等；</li>
<li>令一个是&ndash;color参数，用来在程序输出错误信息、提示信息时把文字颜色变成红色、或者绿色，如果你运行timecat后输出的内容是在命令行，那么可以加上这个参数，如果不是，那么不建议加这个参数。</li>
</ol>
<h2 id="5-性能测试">5 性能测试</h2>
<p>是骡子是马，也得拉出来遛遛，到底timecat是不是就比awk、grep要快，下面就进行一下测试。</p>
<h3 id="51-测试环境与测试步骤说明">5.1 测试环境与测试步骤说明</h3>
<p>这次测试使用的日志文件来源于头条线上机器的真实日志的一部分，大小为5.9G，我将这个文件命名为6g.log。</p>
<p><strong>环境：</strong>
<strong>宿主机：MacBook Pro (Retina, 13-inch, Early 2015) 2.7 GHz Intel Core i5 8 GB 1867 MHz DDR3 Intel Iris Graphics 6100 1536 MB</strong></p>
<p>虚拟机软件：VirtualBox Version 5.0.10 r104061</p>
<p>虚拟机系统：CentOS 7（Linux version 3.10.0-229.el7.x86_64 (<a href="mailto:builder@kbuilder.dev.centos.org">builder@kbuilder.dev.centos.org</a>) (gcc version 4.8.2 20140120 (Red Hat 4.8.2-16) (GCC) ) #1 SMP Fri Mar 6 11:36:42 UTC 2015），1024MB内存，1个CPU</p>
<p>测试流程：</p>
<ul>
<li>执行sync，清空读写cache，让timecat查找6g.log中2015年12月25日9点钟的所有日志，并输出到『test_timecat.out』，得到资源消耗、执行时间等数据；</li>
<li>执行sync，清空读写cache，让grep查找6g.log中2015年12月25日9点钟的所有日志，并输出到『test_grep.out』，得到资源消耗、执行时间等数据；</li>
<li>执行sync，清空读写cache，让awk查找6g.log中2015年12月25日9点钟的所有日志，并输出到『test_awk.out』，得到资源消耗、执行时间等数据。</li>
</ul>
<h3 id="52-timecat测试">5.2 timecat测试</h3>
<p>执行命令：</p>
<p><img src="http://shanks.link/img/timecat/23.png" alt="img"></p>
<p>测试结果：</p>
<p><img src="http://shanks.link/img/timecat/24.png" alt="img"></p>
<p>由于使用了-v参数，所以输出的字节数比实际打印的日志内容多一点。</p>
<h3 id="53-grep测试">5.3 grep测试</h3>
<p>执行命令：</p>
<p><img src="http://shanks.link/img/timecat/25.png" alt="img"></p>
<p>测试结果：</p>
<p><img src="http://shanks.link/img/timecat/26.png" alt="img"></p>
<h3 id="54-awk测试">5.4 awk测试</h3>
<p>在这次测试中，我们使用的awk脚本如下：</p>
<p><img src="http://shanks.link/img/timecat/27.png" alt="img"></p>
<p>执行命令：<strong>./clear*cache.sh &amp;&amp; awk -f &ldquo;/huge/bench.awk&rdquo; &ldquo;/huge/6g.log&rdquo; &gt; test*awk.out</strong> 测试结果：</p>
<p><img src="http://shanks.link/img/timecat/28.png" alt="img"></p>
<h3 id="55-总体结果对比">5.5 总体结果对比</h3>
<p><img src="http://shanks.link/img/timecat/29.png" alt="img"></p>
<p>从测试结果来看，timecat无疑是有着巨大优势的，由于使用了“跳读”的方式，因此缺页次数会比较多。但是从执行时间、CPU占用、系统输入输出（I/O）来看，timecat几乎完胜。</p>
<p>但是不是任何时候都适合用timecat？我觉得不是，当文件足够小（3G左右且你的内存比较大时），或者你确定要搜索的内容在日志文件的比较起始或者比较靠后的位置（这样你可以使用tac）时，使用grep或者awk说不定是个更好的选择。</p>

    </div>
    <footer class="post-footer">
     
 
<div class="post-tags">     
     
    <a href="http://shanks.link/tags/%e8%bf%90%e7%bb%b4" rel="tag" title="运维">#运维#</a>
    
</div>



     <div class="post-nav">
    <div class="post-nav-next post-nav-item">
    
        <a href="http://shanks.link/blog/2021/07/27/%E5%AD%97%E8%8A%82%E8%B7%B3%E5%8A%A8-eb-%E7%BA%A7-hdfs-%E5%AE%9E%E8%B7%B5/" rel="next" title="字节跳动 EB 级 HDFS 实践">
        <i class="fa fa-chevron-left"></i> 字节跳动 EB 级 HDFS 实践
        </a>
    
    </div>

    <div class="post-nav-prev post-nav-item">
    
        <a href="http://shanks.link/blog/2021/07/21/%E7%AD%89%E5%BE%85%E5%92%8C%E5%B8%8C%E6%9C%9B/" rel="prev" title="等待和希望">
        等待和希望 <i class="fa fa-chevron-right"></i>
        </a>
    
    </div>
</div>
      
     
     
     





<script src="https://utteranc.es/client.js"
        repo="shankusu2017@gmail.com/"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>
<noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

    </footer>
  </article>
</section>

          </div>
        </div>
        <div class="sidebar-toggle">
  <div class="sidebar-toggle-line-wrap">
    <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
    <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
  </div>
</div>
<aside id="sidebar" class="sidebar">
  <div class="sidebar-inner">

    <section class="site-overview sidebar-panel  sidebar-panel-active ">
      <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
        src="http://shanks.link/img/logo.jpg"
        alt="shankusu2017@gmail.com" />
    <p class="site-author-name" itemprop="name">shankusu2017@gmail.com</p>
    <p class="site-description motion-element" itemprop="description"> </p>
</div>
      <nav class="site-state motion-element">
    <div class="site-state-item site-state-posts">
      <a href="http://shanks.link/post/">
        <span class="site-state-item-count">438</span>
        <span class="site-state-item-name">日志</span>
      </a>
    </div>
    <div class="site-state-item site-state-categories">    
        <a href="http://shanks.link/categories/">      
         
        <span class="site-state-item-count">25</span>
        
        <span class="site-state-item-name">分类</span>
        
        </a>
    </div>

    <div class="site-state-item site-state-tags">
        <a href="http://shanks.link/tags/">
         
        <span class="site-state-item-count">31</span>
        
        <span class="site-state-item-name">标签</span>
        </a>
    </div>
</nav>
      
      
<div class="links-of-author motion-element">
    
        <span class="links-of-author-item">
        <a href="https://github.com/shankusu2017" target="_blank" title="GitHub">
            <i class="fa fa-fw fa-github"></i>
            GitHub
        </a>
        </span>
    
</div>


      

      <div class="links-of-blogroll motion-element inline">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5b4f2ucxar6&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=35" async="async"></script>
</div>

    </section>
    
  </div>
</aside>

      </div>
    </main>
   
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  <span itemprop="copyrightYear">  &copy; 
  2009 - 2022</span>
  <span class="with-love"><i class="fa fa-heart"></i></span>
  <span class="author" itemprop="copyrightHolder">愿星光伴你左右</span>
</div>
<div class="powered-by">
  Powered by - <a class="theme-link" href="http://gohugo.io" target="_blank" title="hugo" >Hugo v0.101.0</a>
</div>
<div class="theme-info">
  Theme by - <a class="theme-link" href="https://github.com/xtfly/hugo-theme-next" target="_blank"> NexT
  </a>
</div>


      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span id="scrollpercent"><span>0</span>%</span>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
<script type="text/javascript" src="http://shanks.link/js/vendor/jquery/index.js?v=2.1.3"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/fastclick/lib/fastclick.min.js?v=1.0.6"></script> 
<script type="text/javascript" src="http://shanks.link/js/vendor/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/velocity/velocity.min.js?v=1.2.1"></script>
<script type="text/javascript" src="http://shanks.link/js/vendor/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="http://shanks.link/js/vendor/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>

<script src="http://shanks.link/js/vendor/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>

<script type="text/javascript" src="http://shanks.link/js/utils.js"></script>
<script type="text/javascript" src="http://shanks.link/js/motion.js"></script>
<script type="text/javascript" src="http://shanks.link/js/affix.js"></script>
<script type="text/javascript" src="http://shanks.link/js/schemes/pisces.js"></script>

<script type="text/javascript" src="http://shanks.link/js/scrollspy.js"></script>
<script type="text/javascript" src="http://shanks.link/js/post-details.js"></script>
<script type="text/javascript" src="http://shanks.link/js/toc.js"></script>

<script type="text/javascript" src="http://shanks.link/js/bootstrap.js"></script>

<script type="text/javascript" src="http://shanks.link/js/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'] ],
      displayMath: [ ['$$','$$'] ],
      processEscapes: true
    },
    "HTML-CSS": { fonts: ["TeX"] }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML' async></script>
</body>
</html>